{"version":3,"sources":["theme.js","svgLogo.js","Routes/LandingPage.js","helpers/validations.js","Routes/Auth/BaseAuthForm.jsx","helpers/fetch.js","Routes/Auth/Snackbar.jsx","Routes/Auth/LoginForm.jsx","Routes/Auth/LogoutForm.jsx","Routes/Auth/RegisterForm.jsx","Routes/Auth/RegisterConf.jsx","Routes/Auth/ResetForm.jsx","Routes/Auth/ResetConf.jsx","Routes/PrivateRoute.jsx","Routes/Home.jsx","Routes/Build/ItemTypes.js","Gates/Nand.js","Routes/Build/ComponentsDrawer.jsx","Gates/Node.js","Routes/Build/WireHelpers.js","Routes/Build/WireFuncs.js","Routes/Build/GateHelpers.js","Routes/Build/BuildContext.js","Routes/Build/GateFuncs.js","Routes/Build/DnD/DragPreview.js","Routes/Build/DnD/ItemTypes.js","Routes/Build/DnD/Source.js","Routes/Build/DnD/Wire.js","Routes/Build/DnD/TargetFuncs.js","Routes/Build/DnD/Target.js","Routes/Build/DnD/DnDApp.js","Routes/Build/BuildFuncs.js","Routes/Build/Build.jsx","serviceWorker.js","index.js","App.js"],"names":["theme","createMuiTheme","typography","fontFamily","palette","type","primary","light","main","dark","contrastText","secondary","overrides","MuiTab","root","textDecoration","wrapper","color","MuiAppBar","colorPrimary","backgroundColor","position","boxShadow","zIndex","marginBottom","MuiDialog","paper","width","opacity","MuiDialogTitle","textAlign","MuiDrawer","paddingBottom","top","MuiListItemIcon","MuiButton","MuiIconButton","sizeSmall","padding","gateStyle","fill","fillOpacity","fillRule","stroke","gateStrokeWidth","textStrokeWidth","textFontSize","textFontWeight","strokeLinecap","strokeLinejoin","strokeOpacity","strokeMiterlimit","strokeDasharray","Logo","style","pathStyle","strokeWidth","mlns","height","viewBox","d","id","x","y","href","transform","LandingPage","styles","header","minHeight","display","flexDirection","alignItems","justifyContent","headerTitle","fontSize","textShadow","headerSubtitle","headerButton","logo","animation","pointerEvents","animationTextContent","animationPlayState","window","location","pathname","headerAboutMe","marginTop","createdStyleTag","document","createElement","textContent","body","appendChild","NavButton","to","text","Button","component","Link","validatePassword","value","error","test","BaseAuthForm","props","useState","search","focusField","setFocusField","showPassword","setShowPassword","timeouts","validateOnTimeout","setFieldTouched","field","timeout","timeoutId","setTimeout","push","clearTimeouts","timeoutsArray","i","length","clearTimeout","Fields","iconButtonDisabled","cursor","iconButtonEnabled","icon","helpIcon","GridContainerProps","spacing","InputFieldProps","TextField","helperText","margin","EmailFieldProps","name","label","validate","userMustExist","undefined","console","log","ms","Promise","resolve","then","a","fetch","process","method","headers","response","json","data","userExists","validateEmail","onFocus","PasswordFieldProps","InputProps","endAdornment","InputAdornment","IconButton","onClick","Icon","helpText","nextPage","Tooltip","title","placement","history","values","email","Grid","container","item","helpButtonEmail","autoFocus","helpButtonPassword","Submit","ButtonProps","size","disabled","isValid","submitForm","variant","isSubmitting","CircularProgress","submitButtonText","DialogProps","open","fullWidth","maxWidth","onBackdropClick","Dialog","DialogTitle","done","titleAfter","titleBefore","DialogContent","DialogContentText","textAfter","textBefore","initialValues","replace","password","isInitialValid","onSubmit","actions","render","formikProps","onBlur","nextAfterDone","fetchPost","url","handleResponse","JSON","stringify","useStyles","makeStyles","close","SimpleSnackbar","classes","React","setOpen","handleClose","event","reason","Snackbar","anchorOrigin","vertical","horizontal","autoHideDuration","onClose","ContentProps","message","action","key","aria-label","className","LoginForm","setIsAuthenticated","setHelpButtonEmail","setHelpButtonPassword","passwordCheck","setSubmitting","userLoggedIn","localStorage","setItem","reload","errorMsg","setFieldError","LogoutForm","logoutUser","removeItem","RegisterForm","emailAvailable","emailSent","setEmailSent","userRegistered","RegisterConf","ResetForm","resetEmailSent","ResetConf","PrivateRoute","Component","isAuthenticated","rest","getItem","Home","div","circle","levels","flexGrow","FormRow","Fragment","xs","Paper","thickness","evt","BODY","CENTER","CHIP_IN","CHIP_OUT","FLOATING_WIRE","GATE","GATE_IN","GATE_OUT","NAND","NODE","NODE_CENTER","TEXT","WIRE","BOX","CSV","ItemTypes","terminalColors","setTerminalColors","highlight","terminalId","newTerminalColors","cx","cy","r","x1","y1","x2","y2","onMouseOver","onMouseOut","fontWeight","ComponentsDrawer","setShift","zero","expanded","setExpanded","drawerWidth","closed","chapter","drawerHeader","left","borderBottomStyle","borderBottomWidth","borderBottomColor","img","Image","svgString","renderToStaticMarkup","xmlns","divWrap","blob","Blob","URL","createObjectURL","src","addEventListener","revokeObjectURL","once","bottom","Typography","Drawer","BackdropProps","invisible","tabIndex","role","onKeyDown","overflow","justify","List","ListItem","button","ListItemText","overflowX","draggable","onDragStart","target","dataTransfer","setData","setDragImage","handleDragStart","Divider","map","index","terminalColor","setTerminalColor","includes","getTerminalPoint","terminal","svg","element","p","createSVGPoint","ctm","getCTM","matrixTransform","getRelativeXY","baseVal","getElementById","getMousePosition","CTM","getScreenCTM","touches","clientX","e","clientY","f","getTerminalType","terminalType","createFloatingWire","wires","setWires","setFloatingWire","from","newFloatingWireName","existingWireAtIn","wireIds","Object","keys","terminalConnected","forEach","wireId","wireTerminals","split","fromId","fromPoint","toPoint","newFloatingWire","connectedToProvider","terminalIds","some","getConnectedTerminals","connectedTerminals","connectedTerminal","getNetwork","network","connectedTerminalId","networkContainsProvider","containsProvider","networkPoint","getNextName","gateType","gates","currentNumber","highestNumber","gate","Number","toString","addChipTerminalNodePoint","chipTerminalId","chipInTerminal","terminalBbox","getBoundingClientRect","right","pt","svgP","inverse","translation","addNewChipTerminalNode","inOuts","newGates","inOut","chipNodePoint","ChipInsContext","createContext","ChipOutsContext","GatesContext","WiresContext","FloatingWireContext","SelectedElementContext","defaultChipIns","defaultChipOuts","defaultGates","Nand0","rotation","Nand1","defaultWires","BuildContextProvider","chipIns","setChipIns","chipOuts","setChipOuts","setGates","floatingWire","selectedElement","setSelectedElement","useEffect","wireChanges","toId","wireChange","$merge","update","updateWires","inputs","outputs","addChipTerminalNode","Provider","children","draggedGateStyle","currentOffset","parentElement","angle","overlaySvgStyle","svgBbox","paperBbox","borderWidth","borderStyle","borderColor","borderRadius","gateTypes","Node","Nand","DragLayer","monitor","itemType","getItemType","getSourceClientOffset","isDragging","Gate","useContext","connectedWires","draggedWires","gateId","getConnectedWires","newWires","bboxGate","diff","moveConnectedWires","withDragPreview","boxSource","beginDrag","canDrag","DragSource","connect","connectDragSource","dragSource","hideSourceOnDrag","selected","filterUnits","result","in","dx","dy","stdDeviation","in2","mode","filter","creatingNode","setCreatingNode","strokeColor","setStrokeColor","handleDrop","preventDefault","getData","mousePos","addGate","handleDoubleClick","newRotation","rotateGate","addNode","handleMouseMove","dragFloatingWire","handleMouseUp","sourceTerminalId","sourceNetwork","sourceNetworkContainsProvider","targetTerminalId","targetNetwork","targetNetworkContainsProvider","floatingWireNameParts","newWireId","newWirePoints","connectFloatingWire","boxTarget","drop","delta","getDifferenceFromInitialOffset","Math","round","moveBox","DropTarget","connectDropTarget","dropTarget","isOver","onDrop","onDoubleClick","onMouseDown","handleMouseDown","onMouseMove","onMouseUp","Wire","backend","MouseBackEnd","handleDragOver","addRemoveChipTerminal","chipInOuts","setChipInOuts","incDec","newChipInOuts","numInOuts","chipInOutsType","chipInOutsName","connectedTo","chipInOutName","shift","marginLeft","paddingTop","Row","columns","newSelectedElement","handleClick","keyCode","keyId","handleKeyDown","md","TerminalHeadings","direction","Inputs","handleMouseUpIn","inputName","floatingWireName","newChipIns","Outputs","Terminals","child","inputValue","setInputValue","TerminalValues","numInputs","Input","inputProps","maxLength","onChange","val","isBool","isEmpty","validateInputs","outputsVals","numOutputs","concat","readOnly","SaveButton","PlayButton","useMemo","onDragOver","DnDApp","Boolean","hostname","match","ReactDOM","CssBaseline","tabValue","setTabValue","tabGroup1","tabGroup2","AppBar","Toolbar","Tabs","Tab","exact","path","align","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.4b086448.chunk.js","sourcesContent":["import { createMuiTheme } from '@material-ui/core/styles';\r\n// import * as Colors from '@material-ui/core/colors';\r\n\r\n\r\nconst theme = createMuiTheme({\r\n\ttypography: {\r\n        // useNextVariants: true,\r\n        // fontFamily: \"'Segoe', sans-serif\",\r\n        fontFamily: 'Roboto',\r\n\t},\r\n\tpalette: {\r\n\t\ttype: 'dark',\r\n\t\tprimary: {\r\n\t\t\tlight: '#b596c5',\r\n            main: '#2a2a2a',\r\n            // main: '#3a3a3a',\r\n\t\t\tdark: '#424242',\r\n\t\t\tcontrastText: '#ffffff',\r\n\t\t},\r\n\t\tsecondary: {\r\n\t\t\tlight: '#ffcccb',\r\n\t\t\tmain: '#b596c5',\r\n\t\t\tdark: '#ba6b6c',\r\n\t\t\tcontrastText: '#000000',\r\n        },\r\n    },\r\n    overrides: {\r\n        MuiTab: { \r\n            root: {\r\n                '&:hover': {\r\n                    textDecoration: 'none',\r\n                },\r\n            },\r\n            wrapper: {\r\n                '&:hover': {\r\n                    color: 'white',\r\n                },\r\n            },\r\n        },\r\n        MuiAppBar: {\r\n            colorPrimary: {\r\n                backgroundColor: 'rgba(0, 0, 0, 0)',\r\n                position: 'static',\r\n                // minHeight: 'auto',\r\n                boxShadow: 'none',\r\n                zIndex: 9999,\r\n                marginBottom: 13\r\n            },\r\n        },\r\n        MuiDialog: {\r\n            paper: {\r\n                width: '500px',\r\n                opacity: '0.9',\r\n                backgroundColor: '#2a2a2a',\r\n                color: 'white'\r\n                // fullWidth: 'true',\r\n                // maxWidth: 'sm',\r\n            },\r\n        },\r\n        MuiDialogTitle: {\r\n            root: {\r\n                textAlign: 'center',\r\n                color: '#b596c5',\r\n                zIndex: 999,\r\n            },\r\n        },\r\n        MuiDrawer: {\r\n            root: {\r\n                position: 'absolute',\r\n\r\n            },\r\n            paper: {\r\n                width: 240,\r\n                // marginTop: 85, //85\r\n                // paddingTop: 85,\r\n                // position: 'absolute',\r\n                paddingBottom: 100,\r\n                // top: '10',\r\n                top: '85px',\r\n\r\n\r\n            },\r\n        },\r\n        MuiListItemIcon: {\r\n            root: {\r\n                top: '0',\r\n                position: 'static',\r\n            },\r\n        },\r\n        MuiButton: {\r\n            root: {\r\n                color: '#b596c5',\r\n            }\r\n        },\r\n        // MuiDivider: {\r\n        //     root: {\r\n        //       marginTop: 1,\r\n        //     },\r\n        // },\r\n        MuiIconButton: {\r\n            // root: {\r\n            //     padding: 0,\r\n            // },            \r\n            sizeSmall: {\r\n                padding: 0,\r\n            },\r\n        },\r\n    },\r\n})\r\n\r\n//TODO: figure out which keys are never used\r\nconst gateStyle = {\r\n    fill: theme.palette.primary.light, \r\n    fillOpacity: '0.75', \r\n    fillRule: 'evenodd', \r\n    stroke: '#000000', \r\n    gateStrokeWidth: '3',\r\n    textStrokeWidth: '1', \r\n    textFontSize: '10', \r\n    textFontWeight: '100',\r\n    strokeLinecap: 'square', \r\n    strokeLinejoin: 'miter', \r\n    strokeOpacity: '1', \r\n    strokeMiterlimit: '4', \r\n    strokeDasharray: 'none'\r\n}\r\n\r\n\r\nexport { theme, gateStyle }","import React from 'react'\r\n\r\nconst Logo = ({ style }) => {\r\n\r\n    const pathStyle  = {\r\n        fill: style.fill, \r\n        fillOpacity: '0.75', \r\n        fillRule: 'evenodd', \r\n        stroke: '#000000', \r\n        strokeWidth: '12', \r\n        strokeLinecap: 'square', \r\n        strokeLinejoin: 'miter', \r\n        strokeOpacity: '1', \r\n        strokeMiterlimit: '4', \r\n        strokeDasharray: 'none'\r\n    }\r\n    \r\n    return (\r\n        <svg style={style} mlns=\"http://www.w3.org/2000/svg\" width='400' height='400' viewBox=\"0 0 400 400\">\r\n            <path\r\n                style={pathStyle}\r\n                d=\"M 50,51 L 130,51\"\r\n                id=\"path1316\"\r\n            />\r\n            <use\r\n                x=\"0\"\r\n                y=\"0\"\r\n                href=\"#path1316\"\r\n                id=\"use1318\"\r\n                transform=\"translate(0,78)\"\r\n                width=\"500\"\r\n                height=\"180\" \r\n            />\r\n            <use\r\n                x=\"0\"\r\n                y=\"0\"\r\n                href=\"#path1316\"\r\n                id=\"use2208\"\r\n                transform=\"translate(270.5757,39)\"\r\n                width=\"500\"\r\n                height=\"180\" \r\n            />         \r\n            <path\r\n                style={pathStyle}\r\n                d=\"M 207,171 L 135.7,170.99994 L 135.7,12.499996 L 207.46,12.49997 C 246.3576,12.499945 278.3,48.003958 278.3,91.749974 C 278.3,135.49599 246.3576,171 207,171 z\"\r\n            />        \r\n            <path\r\n                style={pathStyle}\r\n                transform=\"translate(12.90989,-0.353527)\"\r\n                d=\"M 305.47014 89.843887 A 20.152544 20.152544 0 1 1  265.16505,89.843887 A 20.152544 20.152544 0 1 1  305.47014 89.843887 z\"\r\n            />\r\n        </svg>\r\n    )\r\n}\r\n\r\nexport default Logo","import React from 'react'\r\n\r\nimport { theme } from '../theme' \r\n\r\nimport Button from '@material-ui/core/Button'\r\nimport { Link } from 'react-router-dom';\r\nimport Logo from '../svgLogo';\r\n\r\n\r\nconst LandingPage = () => {\r\n\r\n    const styles = {\r\n\t\theader: {\r\n\t\t\tbackgroundColor: theme.palette.primary.main,\r\n\t\t\tminHeight: '60vh',\r\n\t\t\tdisplay: 'flex',\r\n\t\t\tflexDirection: 'column',\r\n\t\t\talignItems: 'center',\r\n\t\t\tjustifyContent: 'center',\r\n\t\t\tcolor: theme.palette.primary.contrastText,\r\n\t\t},\r\n\t\theaderTitle: {\r\n\t\t\tfontSize: 'calc(14px + 2vmin)',\r\n\t\t\ttextShadow: '-1px 0 black, 0 1px black, 1px 0 black, 0 -1px black',\r\n\t\t},\r\n\t\theaderSubtitle: {\r\n\t\t\tfontSize: 'calc(6px + 2vmin)',\r\n\t\t},\r\n\t\theaderButton: {\r\n\t\t\tcolor: theme.palette.primary.light,\r\n\t\t},\r\n\t\tlogo: {\r\n\t\t\tanimation: 'App-logo-spin infinite 20s linear',\r\n\t\t\theight: '30vmin',\r\n\t\t\tpointerEvents: 'none',\r\n\t\t\tanimationTextContent: '@keyframes App-logo-spin { from{transform: rotate(0deg);} to{transform: rotate(360deg);} }',\r\n            fill: theme.palette.primary.light,\r\n            animationPlayState: window.location.pathname === '/' ? 'running' : 'paused'\r\n\t\t},\r\n\t\theaderAboutMe: {\r\n\t\t\tfontSize: 'calc(1px + 2vmin)',\r\n\t\t\tmarginTop: '110px',\r\n\t\t},\r\n    }\t\r\n\r\n    var createdStyleTag = document.createElement(\"style\");\r\n\tcreatedStyleTag.textContent = styles.logo.animationTextContent\r\n\tdocument.body.appendChild(createdStyleTag);\r\n\r\n    const NavButton = ({ to, text }) => {\r\n        return <Button style={styles.headerButton} component={Link} to={to}>{text}</Button>;\r\n    }\r\n\r\n    \r\n    return (\r\n        <header style={styles.header}>\r\n            <Logo style={styles.logo}/>\r\n            <p style={styles.headerTitle}>\r\n                Welcome to the <code>Nand2Tetris</code> App \r\n            </p>\r\n            <p style={styles.headerSubtitle}>\r\n                Please <NavButton to='/login' text='Log In'/> or <NavButton to='/register' text='Register'/> \r\n            </p>\r\n            <p style={styles.headerAboutMe}>\r\n                You may also learn a little bit <NavButton to='/about' text='About N2T'/>\r\n            </p>\r\n        </header>\r\n    )\r\n}\r\n\r\nexport default LandingPage","export const validateEmail = (value, userMustExist) => {\r\n\r\n    let error\r\n    if (!value)\r\n        error = 'Required'\r\n    else if (!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}$/i.test(value))\r\n        error = 'Invalid email address'\r\n    \r\n    if (error !== undefined)\r\n        return error\r\n\r\n    console.log('Checking database for user')\r\n    const wait = ms => new Promise(resolve => setTimeout(resolve, ms))\r\n    return wait(0).then(async () => {\r\n                \r\n        await fetch(process.env.REACT_APP_API_URL + 'checkUserExists', {\r\n            method: 'POST',\r\n            headers: {'Content-Type':'application/json'},\r\n            body: value,\r\n            // mode: 'no-cors'\r\n        })\r\n            .then(response => response.json())\r\n            .then(data => {\r\n\r\n                if (!userMustExist && data.userExists)\r\n                    error = 'User already exists'\r\n                else if (userMustExist && !data.userExists)\r\n\t\t\t\t\terror = 'User not found' \r\n\r\n                throw error\r\n            })\r\n    })\r\n}\r\n\r\n\r\nexport const validatePassword = (value) => {\r\n\r\n    let error\r\n    if (!value)\r\n        error = 'Required'\r\n    else if (value && !/^(?=.*\\d)(?=.*[a-zA-Z])(?!.*\\s).{6,12}$/i.test(value))\r\n        error = 'Must be alphanumeric and 6-8 characters'\r\n    \r\n    return error\r\n}\r\n\r\nexport const validateConfirmation = (confirmationValue, passwordValue) => {\r\n\r\n    console.log('confirmationValue = ', confirmationValue)\r\n    console.log('passwordValue = ', passwordValue)\r\n\r\n    let error\r\n    if (!confirmationValue)\r\n        error = 'Required'\r\n    else if (confirmationValue && confirmationValue !== passwordValue)\r\n        error = 'Passwords must match'\r\n    \r\n    console.log('error = ', error)\r\n    \r\n    return error\r\n}","import React, { useState, Fragment } from 'react'\r\n\r\nimport Dialog from '@material-ui/core/Dialog'\r\nimport DialogTitle from '@material-ui/core/DialogTitle'\r\nimport DialogContent from '@material-ui/core/DialogContent'\r\nimport DialogContentText from '@material-ui/core/DialogContentText'\r\n\r\nimport Button from '@material-ui/core/Button'\r\nimport { Formik, Field, Form } from 'formik'\r\nimport CircularProgress from '@material-ui/core/CircularProgress'\r\n\r\nimport { TextField } from 'formik-material-ui'\r\n\r\nimport Grid from '@material-ui/core/Grid'\r\nimport AccountCircle from '@material-ui/icons/AccountCircle'\r\nimport Lock from '@material-ui/icons/Lock'\r\nimport Help from '@material-ui/icons/Help'\r\n\r\n\r\nimport { validateEmail, validatePassword } from '../../helpers/validations'\r\n\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport InputAdornment from '@material-ui/core/InputAdornment'\r\nimport Visibility from '@material-ui/icons/Visibility'\r\nimport VisibilityOff from '@material-ui/icons/VisibilityOff'\r\n\r\nimport Tooltip from '@material-ui/core/Tooltip'\r\n\r\n\r\n\r\n\r\nconst BaseAuthForm =  (props) => {\r\n\r\n\tconst [focusField, setFocusField] = useState(window.location.search === '' ? 'email' : 'password')\r\n\tconst [showPassword, setShowPassword] = useState(false)\r\n\r\n\tlet timeouts = []\r\n\tfunction validateOnTimeout(setFieldTouched, field, timeout) {\r\n\t\tconst setFieldTouchedCallback = () => setFieldTouched(field)\r\n\t\tlet timeoutId = setTimeout(setFieldTouchedCallback, timeout)\r\n\t\ttimeouts.push(timeoutId)\r\n\t}\r\n\r\n\tfunction clearTimeouts(timeoutsArray) {\r\n\t\tfor (let i = 0; i < timeoutsArray.length; i++)\r\n\t\t\tclearTimeout(timeoutsArray[i])\r\n\t}\r\n\r\n\tconst Fields = ( props ) => {\r\n\r\n\t\tconst styles = {\r\n\t\t\ticonButtonDisabled: {\r\n\t\t\t\tcursor: 'default',\r\n\t\t\t},\r\n\t\t\ticonButtonEnabled: {\r\n\t\t\t\tcursor: 'pointer',\r\n\t\t\t},\r\n\t\t\ticon: {\r\n\t\t\t\twidth: '15', \r\n\t\t\t\theight: 'auto',\r\n\t\t\t},\r\n\t\t\thelpIcon: {\r\n\t\t\t\tcolor: 'red',\r\n\t\t\t},\r\n\t\t}\r\n\r\n\t\tconst GridContainerProps = {\r\n\t\t\tspacing: 6,\r\n\t\t\talignItems: 'center',\r\n\t\t}\r\n\r\n\t\tconst InputFieldProps = {\r\n\t\t\tcomponent: TextField,\r\n\t\t\thelperText: ' ',\r\n\t\t\tmargin: \"dense\",\r\n\t\t}\r\n\r\n\t\tconst EmailFieldProps = {\r\n\t\t\t...InputFieldProps,\r\n\t\t\tname: \"email\",\r\n\t\t\ttype: \"email\",\r\n\t\t\tlabel: \"Email\",\r\n\t\t\tvalidate: (value) => validateEmail(value, props.userMustExist),\r\n\t\t\tonFocus: () => validateOnTimeout(props.setFieldTouched, 'email', 5000),\r\n\t\t}\r\n\r\n\t\tconst PasswordFieldProps = {\r\n\t\t\t...InputFieldProps,\r\n\t\t\tname: \"password\",\r\n\t\t\ttype: showPassword ? 'text' : 'password',\r\n\t\t\tlabel: \"Password\",\r\n\t\t\tvalidate: validatePassword,\r\n\t\t\tInputProps: {\r\n\t\t\t\tendAdornment: (\r\n\t\t\t\t\t<InputAdornment position=\"end\">\r\n\t\t\t\t\t\t<IconButton\tonClick={()=>setShowPassword(!showPassword)}>\r\n\t\t\t\t\t\t\t{showPassword ? <Visibility style={styles.icon} /> : <VisibilityOff style={styles.icon} />}\r\n\t\t\t\t\t\t</IconButton>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t</InputAdornment>\r\n\t\t\t\t)\r\n\t\t\t},\r\n\t\t\tonFocus: () => validateOnTimeout(props.setFieldTouched, 'password', 5000),\r\n\t\t}\r\n\r\n\t\tconst Icon = ({ icon, helpText, nextPage }) => {\r\n\t\t\treturn(\r\n\t\t\t\t<Tooltip title={helpText} placement=\"left\">\r\n\t\t\t\t\t{!nextPage ? \r\n\t\t\t\t\t\t<IconButton style={styles.iconButtonDisabled}>\r\n\t\t\t\t\t\t\t{icon === 'email' && <AccountCircle style={styles.icon} />}\r\n\t\t\t\t\t\t\t{icon === 'password' && <Lock style={styles.icon} />}\r\n\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t:\r\n\t\t\t\t\t\t<IconButton style={styles.iconButtonEnabled} onClick={ nextPage ? ()=> props.history.push(nextPage+props.values.email) : null }>\r\n\t\t\t\t\t\t\t<Help style={{...styles.icon, ...styles.helpIcon}} />\r\n\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t}\r\n\t\t\t\t</Tooltip>\r\n\t\t\t)\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<Fragment>\r\n\t\t\t\t<Grid container {...GridContainerProps}>\r\n\t\t\t\t\t<Grid item><Icon icon={props.helpButtonEmail.icon} helpText={props.helpButtonEmail.helpText} nextPage={props.helpButtonEmail.nextPage} /></Grid>\r\n\t\t\t\t\t<Grid item><Field {...EmailFieldProps} autoFocus={focusField === 'email'}/></Grid>\r\n\t\t\t\t</Grid>\r\n\t\t\t\t<Grid container {...GridContainerProps}>\r\n\t\t\t\t\t<Grid item>\r\n\t\t\t\t\t\t<Icon icon={props.helpButtonPassword.icon} helpText={props.helpButtonPassword.helpText} nextPage={props.helpButtonPassword.nextPage} />\r\n\t\t\t\t\t\t{/* {props.alternateButton && props.submitCount > 0 && !props.isSubmitting ? \r\n\t\t\t\t\t\t\t<Icon icon='help' helpText='Reset password?'/>\r\n\t\t\t\t\t\t\t: \r\n\t\t\t\t\t\t\t<Icon icon='password' helpText='Password should be 6-8 characters'/>\r\n\t\t\t\t\t\t} */}\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t<Grid item><Field {...PasswordFieldProps} autoFocus={focusField === 'password'} /></Grid>\r\n\t\t\t\t</Grid>\r\n\t\t\t</Fragment>\r\n\t\t)\r\n\t}\r\n\r\n\tconst Submit = ( props ) => {\r\n\r\n\t\tconst ProgressProps = {\r\n\t\t\tcolor: 'secondary',\r\n\t\t\tsize: 30,\r\n\t\t}\r\n\r\n\t\tconst ButtonProps = {\r\n\t\t\tcolor: 'secondary',\r\n\t\t\tsize: 'small',\r\n\t\t\tdisabled: !props.isValid,\r\n\t\t\tonClick: props.submitForm,\r\n\t\t\tvariant: 'contained',\r\n\t\t}\r\n\r\n\t\tconst style = {\r\n\t\t\tdisplay: 'flex', \r\n\t\t\tjustifyContent: 'center',\r\n\t\t}\r\n\t\t\r\n\t\treturn (\r\n\t\t\t<div style={style}>\r\n\t\t\t\t{props.isSubmitting ?\r\n\t\t\t\t\t<CircularProgress {...ProgressProps}/> \r\n\t\t\t\t\t:\r\n\t\t\t\t\t<Button {...ButtonProps}>{props.submitButtonText}</Button>\r\n\t\t\t\t}\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n\r\n\tconst DialogProps = {\r\n\t\topen: true,\r\n\t\tfullWidth: true,\r\n\t\tmaxWidth: 'xs',\r\n\t\tonBackdropClick: () => {clearTimeouts(timeouts); props.history.push('/')},\r\n\t}\r\n\r\n\tconst DialogContentTextProps = {\r\n\t\tvariant: 'body2',\r\n\t}\r\n\r\n\tfunction focusNext(values) {\r\n\t\tif      (values.email === '')           setFocusField('email')\r\n\t\telse if (values.password === '')\t\tsetFocusField('password')\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Dialog {...DialogProps}>\t\r\n\t\t\t<DialogTitle>{props.done ? props.titleAfter : props.titleBefore}</DialogTitle>\r\n\t\t\t<DialogContent>\r\n\t\t\t\t<DialogContentText {...DialogContentTextProps}>{props.done ? props.textAfter : props.textBefore}</DialogContentText>\r\n\t\t\t\t<br />\r\n\t\t\t\t<Formik\r\n\t\t\t\t\tinitialValues={{\r\n\t\t\t\t\t\temail: window.location.search.replace('?email=',''),\r\n\t\t\t\t\t\tpassword: '',\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tisInitialValid={props.isInitialValid}\r\n\t\t\t\t\tonSubmit={(values, actions) => {clearTimeouts(timeouts); props.onSubmit(values, actions)}}\r\n\t\t\t\t\trender={formikProps => \t\t\t\t\t\t\t\r\n\t\t\t\t\t\t<Form onBlur={() => focusNext(formikProps.values)}>\r\n\t\t\t\t\t\t\t{!props.done && <Fields {...props} {...formikProps}/>}\r\n\t\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t\t{(!props.done || props.nextAfterDone) && <Submit {...props} {...formikProps}/> }\r\n\t\t\t\t\t\t</Form>\r\n\t\t\t\t\t}\r\n\t\t\t\t>\r\n\t\t\t\t</Formik>\r\n\t\t\t</DialogContent>\r\n\t\t</Dialog>\r\n\t)\r\n}\r\n\r\nexport default BaseAuthForm","export function fetchPost(url, body, handleResponse) {\r\n\r\n    console.log('Fetching from ' + url)\r\n\r\n    \r\n    \r\n    fetch(process.env.REACT_APP_API_URL + url, {\r\n        method: 'POST',\r\n        headers: {'Content-Type':'application/json'},\r\n        body: JSON.stringify(body),\r\n    })   \r\n        .then(response => {\r\n            console.log('Received response from server: ', response)\r\n            return response.json()\r\n        })\r\n        .then(data => {\r\n            console.log('Received data from server: ' + JSON.stringify(data))\r\n            handleResponse(data)\r\n        })\r\n}\r\n\r\n\r\n\r\n// export function fetchPost(url, body, handleResponse) {\r\n\r\n//     console.log('Fetching from ' + url)\r\n    \r\n//     fetch('http://127.0.0.1:5000'+url, {\r\n//         method: 'POST',\r\n//         headers: {'Content-Type':'application/json'},\r\n//         body: JSON.stringify(body),\r\n//     })\r\n//         .then(response => {\r\n//             console.log('Received response from ' + url + ': ' + response.status)\r\n//             handleResponse(response)\r\n//         })\r\n//}\r\n\r\n\r\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\nimport Snackbar from '@material-ui/core/Snackbar';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  close: {\r\n    padding: theme.spacing(0.5),\r\n  },\r\n}));\r\n\r\nexport default function SimpleSnackbar() {\r\n  const classes = useStyles();\r\n  const [open, setOpen] = React.useState(true);\r\n\r\n  const handleClick = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = (event, reason) => {\r\n    if (reason === 'clickaway') {\r\n      return;\r\n    }\r\n\r\n    setOpen(false);\r\n  };\r\n\r\n  return (\r\n      <Snackbar\r\n        anchorOrigin={{\r\n          vertical: 'center',\r\n          horizontal: 'left',\r\n        }}\r\n        open={open}\r\n        autoHideDuration={6000}\r\n        onClose={handleClose}\r\n        ContentProps={{\r\n          'aria-describedby': 'message-id',\r\n        }}\r\n        message={<span id=\"message-id\">Use 'guest@fake.com' and 'password123' to trial</span>}\r\n        action={[\r\n        //   <Button key=\"undo\" color=\"secondary\" size=\"small\" onClick={handleClose}>\r\n        //     UNDO\r\n        //   </Button>,\r\n          <IconButton\r\n            key=\"close\"\r\n            aria-label=\"close\"\r\n            color=\"inherit\"\r\n            className={classes.close}\r\n            onClick={handleClose}\r\n          >\r\n            <CloseIcon />\r\n          </IconButton>,\r\n        ]}\r\n      />\r\n  );\r\n}","import React, { useState } from 'react'\r\nimport BaseAuthForm from './BaseAuthForm';\r\nimport { fetchPost } from '../../helpers/fetch'\r\nimport SimpleSnackbar from './Snackbar';\r\n\r\n\r\nconst LoginForm = ({ history, setIsAuthenticated }) => {\r\n\r\n    const [helpButtonEmail, setHelpButtonEmail] = useState({ icon: 'email', helpText: 'Your email is your username', nextPage: null })\r\n    const [helpButtonPassword, setHelpButtonPassword] = useState({ icon: 'password', helpText: 'Password should be 6-8 characters', nextPage: null })\r\n \r\n    function logInUser(values, actions) {\r\n\r\n\t\tconsole.log('Logging in user: ', values)\r\n\t\t\r\n\t\tfunction handleResponse(data) {\r\n            \r\n            actions.setSubmitting(false)\r\n\r\n            if (data.userLoggedIn)\r\n            {\r\n                console.log('Correct password')\r\n                setIsAuthenticated(true)\r\n                localStorage.setItem('authenticated', true)\r\n                history.push('/home')\r\n                window.location.reload();\r\n            }\r\n            else \r\n            {\r\n                console.log(data.errorMsg)\r\n\r\n                if (data.errorMsg === 'User not activated') {\r\n                    actions.setFieldError('email', data.errorMsg)\r\n                    // setHelpButton({ icon: 'help', helpText: 'Resend activation link?', nextPage: '/registerUser?resendEmail=true&' })\r\n                    setHelpButtonEmail({ icon: 'help', helpText: 'Resend activation link?', nextPage: '/register?email=' })\r\n                }\r\n                else if (data.errorMsg === 'Incorrect password') {\r\n                    actions.setFieldError('password', data.errorMsg)\r\n                    setHelpButtonPassword({ icon: 'help', helpText: 'Reset password?', nextPage: '/reset?email=' })\r\n                }\r\n            }\r\n        }\r\n\r\n        fetchPost('/logInUser', values, handleResponse)\r\n    }\r\n    \r\n    return (\r\n        <>\r\n            <SimpleSnackbar></SimpleSnackbar>\r\n            <BaseAuthForm \r\n                history={history}\r\n                done={false}\r\n                titleBefore='Log In'\r\n                textBefore='Enter an email and password'\r\n                titleAfter='Success'\r\n                textAfter={'Please wait while we log you in'}\r\n                userMustExist={true}\r\n                passwordCheck={false}\r\n                onSubmit={logInUser}\r\n                submitButtonText='Log In'\r\n                helpButtonEmail={helpButtonEmail}\r\n                helpButtonPassword={helpButtonPassword}\r\n            />\r\n        </>\r\n    )\r\n}\r\n\r\nexport default LoginForm","import React from 'react'\r\nimport BaseAuthForm from './BaseAuthForm';\r\n\r\n\r\nconst LogoutForm = ({ history }) => {\r\n   \r\n    function logoutUser() {\r\n\r\n        console.log('Logging out user')\r\n\r\n        localStorage.removeItem('authenticated')\r\n\r\n        history.push('/')\r\n        window.location.reload();\r\n\r\n        // function handleResponse(data) {\r\n\r\n        //     actions.setSubmitting(false)\r\n\r\n        //     if (data.userRegistered)\r\n        //     {\r\n        //         console.log('Server registered the new user')\r\n        //         setEmailSent(values.email)\r\n        //     }\r\n        //     else\r\n        //         console.log('Server unable to register user')\r\n        // }\r\n    \r\n        // fetchPost('/registerUser', values, handleResponse)\r\n    }\r\n\r\n    setTimeout(logoutUser, 2000)\r\n\r\n    return (\r\n        <BaseAuthForm \r\n            history={history}\r\n            done={true}\r\n            titleBefore='Blah'\r\n            textBefore='Blah blah'\r\n            titleAfter='Logged Out'\r\n            textAfter={'You have logged out successfully. Returning to the landing page.'}\r\n            userMustExist={false}\r\n            passwordCheck={true}\r\n            onSubmit={logoutUser}\r\n            submitButtonText='Blah'\r\n        />\r\n    )\r\n}\r\n\r\nexport default LogoutForm","import React, { useState } from 'react'\r\nimport BaseAuthForm from './BaseAuthForm';\r\nimport { fetchPost } from '../../helpers/fetch'\r\n\r\n\r\nconst RegisterForm = ({ history }) => {\r\n\r\n    const emailAvailable = window.location.search.replace('?email=','')\r\n    const [emailSent, setEmailSent] = useState('')\r\n\r\n    const [helpButtonEmail, setHelpButtonEmail] = useState({ icon: 'email', helpText: 'Use your email as your username', nextPage: null })\r\n    const [helpButtonPassword, setHelpButtonPassword] = useState({ icon: 'password', helpText: 'Password should be 6-8 characters', nextPage: null })\r\n    \r\n    function registerUser(values, actions) {\r\n\r\n        console.log('Registering user: ', values)\r\n    \r\n        function handleResponse(data) {\r\n\r\n            actions.setSubmitting(false)\r\n\r\n            if (data.userRegistered)\r\n            {\r\n                console.log('Server registered the new user')\r\n                setEmailSent(values.email)\r\n            }\r\n            else\r\n                console.log('Server unable to register user')\r\n        }\r\n    \r\n        fetchPost('/registerUser', values, handleResponse)\r\n    }\r\n\r\n    return (\r\n        <BaseAuthForm \r\n            history={history}\r\n            done={emailSent}\r\n            titleBefore={emailAvailable ? 'Reactivate' : 'Register'}\r\n            textBefore={emailAvailable ? 'Reenter your password' : 'Enter an email and password'}\r\n            titleAfter={emailAvailable ? 'Email resent' : 'Account registered'}\r\n            textAfter={'An email has been sent to ' + emailSent + ' with an activation link'}\r\n            userMustExist={emailAvailable ? true : false}\r\n            passwordCheck={emailAvailable ? false : true}\r\n            onSubmit={registerUser}\r\n            submitButtonText={emailAvailable ? 'Resend activation email' : 'Register'}\r\n            helpButtonEmail={helpButtonEmail}\r\n            helpButtonPassword={helpButtonPassword}\r\n        />\r\n    )\r\n}\r\n\r\nexport default RegisterForm","import React from 'react'\r\nimport BaseAuthForm from './BaseAuthForm';\r\n\r\n\r\nconst RegisterConf = ({ history }) => {\r\n\r\n    let email = window.location.search.replace('?email=','')\r\n\r\n    return (\r\n        <BaseAuthForm \r\n            history={history}\r\n            done={true}\r\n            titleAfter='Account activated'\r\n            textAfter={'Click below to sign in as ' + email}\r\n            onSubmit={() => history.push('/login?email='+email)}\r\n            submitButtonText='Log In'\r\n            nextAfterDone={true}\r\n            isInitialValid={true}\r\n        />\r\n    )\r\n}\r\n\r\nexport default RegisterConf","import React, { useState } from 'react'\r\nimport BaseAuthForm from './BaseAuthForm';\r\nimport { fetchPost } from '../../helpers/fetch'\r\n\r\n\r\nconst ResetForm = ({ history }) => {\r\n\r\n    const [emailSent, setEmailSent] = useState('')\r\n    \r\n    function resetPassword(values, actions) {\r\n\r\n        console.log('Resetting password for user: ', values)\r\n    \r\n        function handleResponse(data) {\r\n\r\n            actions.setSubmitting(false)\r\n\r\n            if (data.resetEmailSent)\r\n            {\r\n                console.log('Server reset the password')\r\n                setEmailSent(values.email)\r\n            }\r\n            else\r\n                console.log('Server unable to reset the password')\r\n        }\r\n    \r\n        fetchPost('/resetPasswordEmail', values, handleResponse)\r\n    }\r\n\r\n    return (\r\n        <BaseAuthForm \r\n            history={history}\r\n            done={emailSent}\r\n            titleBefore='Reset password'\r\n            textBefore='Enter an email and password'\r\n            titleAfter='Email sent'\r\n            textAfter={'An email has been sent to ' + emailSent + ' with a confirmation link'}\r\n            userMustExist={true}\r\n            passwordCheck={true}\r\n            onSubmit={resetPassword}\r\n            submitButtonText='Send confirmation email'\r\n        />\r\n    )\r\n}\r\n\r\nexport default ResetForm","import React from 'react'\r\nimport BaseAuthForm from './BaseAuthForm';\r\n\r\n\r\nconst ResetConf = ({ history }) => {\r\n\r\n    let email = window.location.search.replace('?email=','')\r\n\r\n    return (\r\n        <BaseAuthForm \r\n            history={history}\r\n            done={true}\r\n            titleAfter='Password reset'\r\n            textAfter={'Click below to sign in as ' + email}\r\n            onSubmit={() => history.push('/login?email='+email)}\r\n            submitButtonText='Log In'\r\n            nextAfterDone={true}\r\n            isInitialValid={true}\r\n        />\r\n    )\r\n}\r\n\r\nexport default ResetConf","import React from 'react'\r\nimport { Route, Redirect } from 'react-router-dom';\r\n\r\n\r\nconst PrivateRoute = ({ component: Component, isAuthenticated, ...rest }) => (\r\n    <Route \r\n        {...rest} \r\n        render={(props) => (\r\n            isAuthenticated || localStorage.getItem('authenticated') ?\r\n                <Component {...props} />\r\n                : \r\n                <Redirect to='/login' />\r\n        )} \r\n    />\r\n)\r\n\r\nexport default PrivateRoute","import React from 'react';\r\n\r\nimport Grid from '@material-ui/core/Grid';\r\n\r\nimport { theme } from '../theme' \r\n\r\nimport Button from '@material-ui/core/Button'\r\n\r\nimport CircularProgress from '@material-ui/core/CircularProgress'\r\n\r\nimport Paper from '@material-ui/core/Paper'\r\n\r\n\r\nconst Home = ({ history }) => {\r\n\r\n   \r\n    // const NavButton = ({ to, text }) => {\r\n    //     return <Button style={styles.headerButton} component={NavLink} to={to}>{text}</Button>;\r\n    // }\r\n\r\n\t\r\n    const styles = {\r\n        div: {\r\n            backgroundColor: theme.palette.primary.main,\r\n            // backgroundSize: 'cover',\r\n            // position:'relative',\r\n            // width: '100%',\r\n            // height: '100%',\r\n            // flex:'1',\r\n            minHeight: '100vh',\r\n        },\r\n        header: {\r\n            backgroundColor: theme.palette.primary.main,\r\n            // minHeight: '90vh',\r\n            display: 'flex',\r\n            flexDirection: 'column',\r\n            alignItems: 'center',\r\n            justifyContent: 'top',\r\n            color: theme.palette.primary.contrastText,\r\n        },\r\n        headerTitle: {\r\n            fontSize: 'calc(14px + 2vmin)',\r\n            textShadow: '-1px 0 black, 0 1px black, 1px 0 black, 0 -1px black',\r\n            // position: 'absolute',\r\n            // width: '100%',\r\n            // height: '100%',\r\n            // top: '0',\r\n            // left: '0'\r\n            // top: '150',\r\n            // left: '50%',\r\n        },\r\n        circle: {\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n            flexDirection: 'column',\r\n            width: '100%',\r\n            textAlign: 'center',\r\n            // margin: '10% 0',\r\n            // minHeight: '200px',\r\n            backgroundColor: theme.palette.primary.main,\r\n            position: 'relative',\r\n            fontSize: 'calc(14px + 2vmin)',\r\n            textShadow: '-1px 0 black, 0 1px black, 1px 0 black, 0 -1px black',\r\n            marginTop: '20px',\r\n            marginBottom: '65px',\r\n        },\r\n        headerSubtitle: {\r\n            fontSize: 'calc(6px + 2vmin)',\r\n        },\r\n        headerButton: {\r\n            color: theme.palette.primary.light,\r\n        },\r\n        levels: {\r\n            // borderStyle: 'solid',\r\n            // borderColor: theme.palette.primary.light,\r\n            // borderWidth: '1px',\r\n            // borderRadius: '1%',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n            padding: '30px',\r\n            width: '600px',\r\n            height: '300px',\r\n            marginBottom: '30px',\r\n            flexGrow: '1',\r\n        },\r\n        paper: {\r\n            padding: theme.spacing(1),\r\n            textAlign: 'center',\r\n            color: theme.palette.text.secondary,\r\n        },\r\n    }\r\n\r\n        \r\n    // const logoStyle = {\r\n    //     ...styles.logo, \r\n    //     animationPlayState: window.location.pathname === '/' ? 'running' : 'paused'\r\n\t// } \r\n\r\n    let level = 2\r\n    let totalLevels = 3\r\n    let percent = (level / totalLevels) * 100\r\n\r\n    function FormRow(props) {\r\n\r\n\r\n\r\n        return (\r\n          <React.Fragment>\r\n            <Grid item xs={4}>\r\n              <Paper style={styles.paper}>item</Paper>\r\n            </Grid>\r\n            <Grid item xs={4}>\r\n                <Paper style={styles.paper}>item</Paper>\r\n            </Grid>\r\n            <Grid item xs={4}>\r\n                <Paper style={styles.paper}>item</Paper>\r\n            </Grid>\r\n          </React.Fragment>\r\n        );\r\n      }\r\n\r\n    return (\r\n        <div style={styles.header}>\r\n            <div style={styles.circle} >\r\n                <CircularProgress style={{ position: 'absolute' }} size={140} variant='static' value={percent} thickness={1} color='secondary' />\r\n                Level <br />{level}\r\n            </div>\r\n            <Paper style={styles.levels}>\r\n                <Grid container spacing={6}>\r\n                    <Grid container item xs={12} spacing={6}>\r\n                        <FormRow />\r\n                    </Grid>\r\n                    <Grid container item xs={12} spacing={6}>\r\n                        <FormRow />\r\n                    </Grid>\r\n                    <Grid container item xs={12} spacing={6}>\r\n                        <FormRow />\r\n                    </Grid>\r\n                </Grid>\r\n            </Paper>\r\n\r\n\r\n            <p style={styles.headerSubtitle}>\r\n                <Button style={styles.headerButton} onClick={(evt) => history.push('/build')}>Build</Button> to advance to the next level\r\n            </p>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Home","export default {\r\n    BODY: 'Body',\r\n    CENTER: 'Center',\r\n    CHIP_IN: 'in',\r\n    CHIP_OUT: 'out',\r\n    FLOATING_WIRE: 'floatingWire',\r\n    GATE: 'Gate', // for react-dnd?\r\n    GATE_IN: 'In',\r\n    GATE_OUT: 'Out',\r\n    NAND: 'Nand',\r\n    NODE: 'Node',\r\n    NODE_CENTER: 'Center',\r\n    TEXT: 'Text',\r\n    WIRE: '_',\r\n    // react-dnd\r\n    BOX: 'box',\r\n    CSV: 'csv'\r\n}","import React, { useState } from 'react'\r\n\r\nimport './Nand.css'     //TODO: move draggable to Source.css or something\r\n\r\nimport { gateStyle } from '../theme'\r\n\r\nimport ItemTypes from '../Routes/Build/ItemTypes'\r\n\r\n// Nand gate receives id from addGate() and attaches specific gate parts\r\nexport default ({ id }) => {\r\n\r\n    // Keep track of which terminal is highlighted\r\n    const [terminalColors, setTerminalColors] = useState({\r\n        [id+ItemTypes.GATE_IN+'A']: gateStyle.stroke,\r\n        [id+ItemTypes.GATE_IN+'B']: gateStyle.stroke,\r\n        [id+ItemTypes.GATE_OUT]: gateStyle.stroke,\r\n    })\r\n\r\n    // Modify only the terminal being mouserOver'd or mouseOut'd\r\n    function highlight(terminalId, color) {\r\n        let newTerminalColors = { ...terminalColors }\r\n        newTerminalColors[terminalId] = color\r\n        setTerminalColors(newTerminalColors)\r\n    }\r\n\r\n    return (\r\n        <g                              // provides default style (basically for the path and cirlce only)\r\n            id={id}                                     // needed so we can refer to its parent in DragPreview\r\n            stroke={gateStyle.stroke} \r\n            strokeWidth={gateStyle.gateStrokeWidth} \r\n            fill={gateStyle.fill}\r\n        >     \r\n            <path \r\n                id={id+ItemTypes.BODY} className='draggable'\r\n                d='M 20,25 L 47,25 C 75,30 75,70 47,75 L 20,75 Z'\r\n            />   \r\n            <circle cx='75' cy='50' r='7' />  \r\n            <line \r\n                id={id+ItemTypes.GATE_IN+'A'} \r\n                x1='0' y1='35' x2='20' y2='35' \r\n                onMouseOver={()=>highlight(id+ItemTypes.GATE_IN+'A', gateStyle.fill)}\r\n                onMouseOut={()=>highlight(id+ItemTypes.GATE_IN+'A', gateStyle.stroke)}\r\n                stroke={terminalColors[id+ItemTypes.GATE_IN+'A']}\r\n            />  \r\n            <line \r\n                id={id+ItemTypes.GATE_IN+'B'} \r\n                x1='0' y1='65' x2='20' y2='65' \r\n                onMouseOver={()=>highlight(id+ItemTypes.GATE_IN+'B', gateStyle.fill)}\r\n                onMouseOut={()=>highlight(id+ItemTypes.GATE_IN+'B', gateStyle.stroke)}\r\n                stroke={terminalColors[id+ItemTypes.GATE_IN+'B']}\r\n            />  \r\n            <line \r\n                id={id+ItemTypes.GATE_OUT} \r\n                x1='83' y1='50' x2='100' y2='50' \r\n                onMouseOver={()=>highlight(id+ItemTypes.GATE_OUT, gateStyle.fill)}\r\n                onMouseOut={()=>highlight(id+ItemTypes.GATE_OUT, gateStyle.stroke)}\r\n                stroke={terminalColors[id+ItemTypes.GATE_OUT]}\r\n            />    \r\n            <text \r\n                id={id+ItemTypes.TEXT}\r\n                strokeWidth={gateStyle.textStrokeWidth}\r\n                x='30' y='54' \r\n                fontSize={gateStyle.textFontSize}\r\n                fontWeight={gateStyle.textFontWeight}\r\n            >\r\n                {id}\r\n            </text>    \r\n        </g>\r\n    )\r\n}","import React, { useState } from 'react';\r\nimport Drawer from '@material-ui/core/Drawer';\r\nimport Button from '@material-ui/core/Button';\r\nimport List from '@material-ui/core/List';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport Memory from '@material-ui/icons/Memory';\r\n\r\nimport Typography from '@material-ui/core/Typography'\r\n\r\nimport { theme } from '../../theme'\r\n\r\nimport Grid from '@material-ui/core/Grid';\r\n\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport ChevronLeft from '@material-ui/icons/ChevronLeft'\r\n\r\nimport Nand from '../../Gates/Nand'\r\nimport { renderToStaticMarkup } from 'react-dom/server';\r\n\r\nimport ItemTypes from './ItemTypes'\r\n\r\nconst ComponentsDrawer = ({ setShift }) => {\r\n\r\n\tconst [open, setOpen] = useState(false)\r\n\r\n\t// const [expanded, setExpanded] = useState({ zero: false })\r\n\tconst [expanded, setExpanded] = useState({ zero: false })\r\n\r\n\tlet drawerWidth = theme.overrides.MuiDrawer.paper.width\r\n\t\r\n\tconst styles = {\r\n\t\topen: {\r\n\t\t\t// height: '30px',\r\n\t\t\tzIndex: 100,\r\n\t\t},\r\n\t\tclosed: {\r\n\t\t\t// width: '70%',\r\n\t\t\t// zIndex : -100,\r\n\t\t},\r\n        header: {\r\n\t\t\tbackgroundColor: theme.palette.primary.main,\r\n\t\t\t// minHeight: '90vh',\r\n\t\t\t// display: 'flex',\r\n\t\t\t// flexDirection: 'column',\r\n\t\t\t// alignItems: 'center',\r\n\t\t\t// justifyContent: 'top',\r\n\t\t\tcolor: theme.palette.primary.contrastText,\r\n\t\t},\r\n\t\tchapter: {\r\n\t\t\tfontSize: '0.7em'\r\n\t\t},\r\n\t\tcomponent: {\r\n\r\n\t\t},\r\n\t\tdrawerHeader: {\r\n\t\t\tbackgroundColor: theme.palette.primary.dark, \r\n\t\t\twidth: drawerWidth,\r\n\t\t\tzIndex: 9999,\r\n\t\t\tposition: \"fixed\",\r\n\t\t\ttop: 85,\t\r\n\t\t\tleft: 0,\r\n\t\t\tborderBottomStyle: 'solid',\r\n\t\t\tborderBottomWidth: '1px',\r\n\t\t\tborderBottomColor: theme.palette.primary.light,\r\n\t\t},\r\n\t\tlogo: {\r\n\t\t\t// animation: 'App-logo-spin infinite 20s linear',\r\n\t\t\t// height: '20vmin',\r\n\t\t\twidth: 100,\r\n\t\t\t// pointerEvents: 'auto',\r\n\t\t\t// cursor: 'grab',\r\n\t\t\t// animationTextContent: '@keyframes App-logo-spin { from{transform: rotate(0deg);} to{transform: rotate(360deg);} }',\r\n\t\t\tfill: theme.palette.primary.light,\r\n\t\t\t// position: 'absolute',\r\n\t\t\t// top: gatePosition.top-50,\r\n\t\t\t// left: gatePosition.left-231.58/2,\r\n\t\t\t// zIndex: 99999,\r\n\t\t},\r\n\t}\t\r\n\t\t\r\n\t// var img = new Image() \r\n\t// img.src = 'https://upload.wikimedia.org/wikipedia/commons/thumb/e/e0/SNice.svg/1200px-SNice.svg.png'\r\n\t// img.src = require('./fav.png')\r\n\t// img.src = require(Nand(styles.logo))\r\n\r\n\r\n\tvar img = new Image();\r\n\tconst svgString = renderToStaticMarkup(\r\n        <svg style={styles.logo} xmlns=\"http://www.w3.org/2000/svg\" mlns=\"http://www.w3.org/2000/svg\" >\r\n\t\t\t<Nand style={styles.logo} divWrap={false} />\r\n\t\t</svg>\r\n\t)\r\n\tlet blob = new Blob([svgString], {type: 'image/svg+xml'});\r\n\tlet url = URL.createObjectURL(blob);\r\n\timg.src = url;\r\n\timg.addEventListener('load', () => URL.revokeObjectURL(url), {once: true});\r\n\timg.width = 100\r\n\timg.height = 100\r\n\r\n\t// console.log('img = ', img)\r\n\r\n\r\n\tfunction handleDragStart(evt) {\r\n\t\tconsole.log('ComponentsDrawer > handleDragStart() : evt.target.id = ', evt.target.id)\r\n\t\tevt.dataTransfer.setData('text/plain', evt.target.id)\r\n\t\tevt.dataTransfer.setDragImage(img, img.width/2, img.height/2)\r\n\t}\r\n\r\n\tconst ExpandedDrawer = () => (\r\n\t\t\t<Drawer style={styles.open} open={open} width={drawerWidth} BackdropProps={{ invisible: true }} onClose={() => setOpen(false)}>\r\n\t\t\t\t<div\r\n\t\t\t\t\ttabIndex={0}\r\n\t\t\t\t\trole=\"button\"\r\n\t\t\t\t\tonClick={() => console.log('onClick')}\r\n\t\t\t\t\tonKeyDown={() => console.log('onKeyDown')}\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\tposition: \"relative\",\r\n\t\t\t\t\t\toverflow: \"auto\",\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t<Grid style={styles.drawerHeader} container alignItems='center' justify='space-around'>\r\n\t\t\t\t\t\t<Grid item>\r\n\t\t\t\t\t\t\t<Memory style={{ color: 'white', display: 'inline' }} />\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t<Grid item>\r\n\t\t\t\t\t\t\t<Typography style={{ transform: 'translate(7px, -1px)' }}>MY COMPONENTS</Typography> \r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t<Grid item>\r\n\t\t\t\t\t\t\t<IconButton onClick={()=> {setOpen(false); setShift(0)}}>\r\n\t\t\t\t\t\t\t\t<ChevronLeft />\r\n\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t</Grid>\t\t\t\t\t\r\n\t\t\t\t\t<List style={{ marginTop: '40px' }}>\r\n\t\t\t\t\t\t<ListItem button key='Nand Gate' onClick={() => setExpanded({zero: !expanded.zero})}>\r\n\t\t\t\t\t\t\t<Typography style={{ position: 'relative', left: '8px', }}>0</Typography>\r\n\t\t\t\t\t\t\t<ListItemText primary='Nand Gate' style={{ position: 'relative', left: '23px', }} />\r\n\t\t\t\t\t\t</ListItem>\r\n\t\t\t\t\t\t{expanded.zero && \r\n\t\t\t\t\t\t\t<div style={{ backgroundColor: '#b596c5', overflowX: 'hidden' }}>\r\n\t\t\t\t\t\t\t\t<ListItem id={'new'+ItemTypes.NAND} button key={ItemTypes.NAND} draggable onDragStart={(evt) => handleDragStart(evt)}>\r\n\t\t\t\t\t\t\t\t\t<ListItemText style={{ position: 'relative', left: '33px' }} secondary='Nand' id='nand' />\t\t\t\t\r\n\t\t\t\t\t\t\t\t</ListItem>\r\n\t\t\t\t\t\t\t\t<ListItem button key='Nand2'>\r\n\t\t\t\t\t\t\t\t\t<ListItemText style={{ position: 'relative', left: '33px' }} secondary='Nand2' />\t\t\t\r\n\t\t\t\t\t\t\t\t</ListItem>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t}\t\r\n\t\t\t\t\t\t<Divider />\r\n\t\t\t\t\t\t{['Basic Gates', 'Arithmetic', 'Memory', 'Machine Language', 'Computer Architecture', 'Assembler'].map((text, index) => (\r\n\t\t\t\t\t\t\t<ListItem button key={text}>\r\n\t\t\t\t\t\t\t\t<Typography style={{ position: 'relative', left: '8px', }}>{index+1}</Typography>\r\n\t\t\t\t\t\t\t\t<ListItemText primary={text} style={{ position: 'relative', left: '8px', }} />\r\n\t\t\t\t\t\t\t</ListItem>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</List>\r\n\t\t\t\t\t<Divider />\r\n\t\t\t\t\t<List>\r\n\t\t\t\t\t\t{['Virtual Machine I', 'Virtual Machine II', 'High-Level Language', 'Compiler I', 'Compiler II', 'Operating System', 'More Fun'].map((text, index) => (\r\n\t\t\t\t\t\t\t<ListItem button key={text}>\r\n\t\t\t\t\t\t\t\t<Typography style={{ position: 'relative', left: index+7 <= 9 ? '8px' : '0px'}}>{index+7}</Typography>\r\n\t\t\t\t\t\t\t\t{/* <Typography>{index+7 <= 9 ? <span>&nbsp;&nbsp;{index+7}</span> : index+7 }</Typography> */}\r\n\t\t\t\t\t\t\t\t<ListItemText primary={text} style={{ position: 'relative', left: index+7 <= 9 ? '8px' : '0px'}} />\r\n\t\t\t\t\t\t\t</ListItem>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</List>\r\n\t\t\t\t</div>\r\n\t\t\t</Drawer>\r\n\t)\r\n\r\n\tconst CollapsedDrawer = () => (\r\n\t\t<div style={{ backgroundColor: theme.palette.primary.dark, width: '35px', position: 'absolute', left: '0', top: '85px', bottom: '0' }}>\r\n\t\t\t<Button style={{ width: '162px', height: '35px', transform: 'rotate(90deg) translate(62px,62px)' }} onClick={() => {setOpen(true); setShift(drawerWidth)}}>\r\n\t\t\t\t<Grid container alignItems='center'>\r\n\t\t\t\t\t<Grid item>\r\n\t\t\t\t\t\t<Memory style={{ color: 'white', display: 'inline' }} />\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t<Grid item>\r\n\t\t\t\t\t\t<Typography style={{ transform: 'translate(62px, 62px)' }}>My Components</Typography> \r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t</Grid>\r\n\t\t\t</Button>\r\n\t\t</div>\r\n\t)\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<CollapsedDrawer />\r\n\t\t\t<ExpandedDrawer />\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default ComponentsDrawer;","import React, { useState } from 'react'\r\n\r\n// import './Node.css'\r\n\r\nimport { theme } from '../theme'\r\n\r\nimport ItemTypes from '../Routes/Build/ItemTypes'\r\n\r\nexport default ({ id, stroke, fill }) => {\r\n\r\n    const [terminalColor, setTerminalColor] = useState(stroke)\r\n\r\n    console.log('Node : id = ', id)\r\n    // console.log('Node : ItemTypes.CHIP_IN = ', ItemTypes.CHIP_IN)\r\n\r\n    // console.log('Node : !id.includes(ItemTypes.CHIP_IN) && !id.includes(ItemTypes.CHIP_OUT) = ', !id.includes(ItemTypes.CHIP_IN) && !id.includes(ItemTypes.CHIP_OUT))\r\n\r\n\r\n\r\n    return (\r\n        <g id={id}>\r\n            {!id.includes(ItemTypes.CHIP_IN) && !id.includes(ItemTypes.CHIP_OUT) ? \r\n                <circle \r\n                    id={id+ItemTypes.BODY} \r\n                    className=\"draggable confine\"\r\n                    cx='50' cy='50' r='5'\r\n                    stroke={stroke}\r\n                    fill={fill}\r\n                />\r\n                : \r\n                null\r\n            }\r\n            <circle \r\n                id={id+ItemTypes.NODE_CENTER} \r\n                // className=\"draggable confine\"\r\n                cx='50' cy='50' \r\n                r={id.includes(ItemTypes.CHIP_IN) || id.includes(ItemTypes.CHIP_OUT) ? '5' : '2'}\r\n                stroke={terminalColor}\r\n                fill={terminalColor}\r\n                onMouseOver={()=>setTerminalColor(theme.palette.primary.light)}\r\n                onMouseOut={()=>setTerminalColor('black')}\r\n            />\r\n        </g> \r\n    )       \r\n}","import ItemTypes from './ItemTypes'\r\n\r\n/**\r\n* Get a new XY point in SVG-Space, where X and Y are relative to an existing element.  Useful for drawing lines between elements, for example\r\n\r\n* X : the new X with relation to element, 5 would be '5' to the right of element's left boundary.  element.width would be the right edge.\r\n* Y : the new Y coordinate, same principle applies\r\n* svg: the parent SVG DOM element\r\n* element: the SVG element which we are using as a base point.\r\n*/\r\n// Source: https://stackoverflow.com/questions/26049488/how-to-get-absolute-coordinates-of-object-inside-a-g-group/37927466\r\nfunction getRelativeXY(x, y, svg, element) {\r\n    // console.log('WireHelpers > getRelativeXY() : x = ', x, ' y = ', y, ' svg = ', svg, ' element = ', element)\r\n\r\n    var p = svg.createSVGPoint();\r\n    // console.log('WireHelpers > getRelativeXY() : p = ', p)\r\n\r\n    p.x = x;\r\n    p.y = y;\r\n\r\n    var ctm = element.getCTM();\r\n    // console.log('WireHelpers > getRelativeXY() : ctm = ', ctm)\r\n\r\n    var pMatrixTransform = p.matrixTransform(ctm)\r\n    // console.log('WireHelpers > getRelativeXY() : pMatrixTransform = ', pMatrixTransform)\r\n\r\n    return pMatrixTransform\r\n}\r\n\r\n// Depending on the terminal type, get the relative point of a specific extreme (or center)\r\nfunction getTerminalPoint(terminal) {\r\n\r\n    console.log('WireHelpers > getTerminalPoint() : terminal = ', terminal)\r\n\r\n    if (!terminal) return\r\n\r\n    let x, y\r\n    \r\n    if      (terminal.id.includes(ItemTypes.GATE_OUT))      { x = 'x2'; y = 'y2' }\r\n    else if (terminal.id.includes(ItemTypes.GATE_IN))       { x = 'x1'; y = 'y1' }\r\n    else if (terminal.id.includes(ItemTypes.NODE_CENTER))   { x = 'cx'; y = 'cy' }\r\n    else if (terminal.id.includes(ItemTypes.CHIP_IN))       { x = 'x2'; y = 'y2' }\r\n    else if (terminal.id.includes(ItemTypes.CHIP_OUT))      { x = 'x1'; y = 'y1' }\r\n\r\n    console.log(`WireHelpers > getTerminalPoint() : x = ${x}, y = ${y}`)\r\n\r\n    x = terminal[x].baseVal.value\r\n    y = terminal[y].baseVal.value\r\n\r\n    const relativePoint = getRelativeXY(x, y, document.getElementById('svg'), terminal)\r\n\r\n    return relativePoint\r\n}\r\n\r\n// Convert window coords (clientX,Y) to svg space\r\n// Source: http://www.petercollingridge.co.uk/tutorials/svg/interactive/dragging/ \r\nfunction getMousePosition(evt) {\r\n    \r\n    var CTM = document.getElementById('svg').getScreenCTM() // current transformation matrix\r\n    \r\n    if (evt.touches) evt = evt.touches[0]\r\n    \r\n    // (x,y) in svg --> (ax+e, dy+f) on screen\r\n    return {\r\n        x: (evt.clientX - CTM.e) / CTM.a,\r\n        y: (evt.clientY - CTM.f) / CTM.d\r\n    }\r\n}\r\n\r\nfunction terminalConnected(terminalId, wires) {\r\n    const wireIds = Object.keys(wires)\r\n    // console.log('WireHelpers > terminalAlreadyConnected() : wireIds = ', wireIds)\r\n\r\n    let terminalConnected = false\r\n    wireIds.forEach(wireId => {\r\n        // console.log('WireHelpers > terminalAlreadyConnected() : wireId = ', wireId)\r\n        const wireTerminals = wireId.split(ItemTypes.WIRE)\r\n        if (wireTerminals[0] === terminalId || wireTerminals[1] === terminalId) {\r\n            terminalConnected = wireId\r\n            return terminalConnected\r\n        }\r\n    })\r\n\r\n    // console.log('WireHelpers > terminalAlreadyConnected() : terminalConnected = ', terminalConnected)\r\n    return terminalConnected\r\n}\r\n\r\n// function terminalConnectedToType(terminalId, wireId) {\r\n\r\n//     console.log('WireHelpers > terminalConnectedToType() : terminalId = ', terminalId)\r\n//     console.log('WireHelpers > terminalConnectedToType() : wireId = ', wireId)\r\n\r\n//     const wireTerminalIds = wireId.split(ItemTypes.WIRE)\r\n//     const fromId = wireTerminalIds[0]\r\n//     const toId = wireTerminalIds[1]\r\n//     console.log('WireHelpers > terminalConnectedToType() : fromId = ', fromId)\r\n//     console.log('WireHelpers > terminalConnectedToType() : toId = ', toId)\r\n\r\n//     let terminalType\r\n//     if      (terminalId === fromId)     terminalType = getTerminalType(toId)\r\n//     else if (terminalId === toId)       terminalType = getTerminalType(fromId)\r\n\r\n//     console.log('WireHelpers > terminalConnectedToType() : terminalType = ', terminalType)\r\n//     return terminalType\r\n// }\r\n\r\nfunction getTerminalType(terminalId) {\r\n\r\n    // console.log('WireHelpers > getTerminalType() : terminalId = ', terminalId)\r\n\r\n    let terminalType\r\n    if      (terminalId.includes(ItemTypes.GATE_IN))        terminalType = ItemTypes.GATE_IN\r\n    else if (terminalId.includes(ItemTypes.GATE_OUT))       terminalType = ItemTypes.GATE_OUT\r\n    else if (terminalId.includes(ItemTypes.CHIP_IN))        terminalType = ItemTypes.CHIP_IN\r\n    else if (terminalId.includes(ItemTypes.CHIP_OUT))       terminalType = ItemTypes.CHIP_OUT\r\n    else if (terminalId.includes(ItemTypes.NODE_CENTER))    terminalType = ItemTypes.NODE_CENTER    // should go last or else CHIP_IN is considered NODE_CENTER\r\n\r\n    // console.log('WireHelpers > getTerminalType() : terminalType = ', terminalType)\r\n    return terminalType\r\n}\r\n\r\n// function mouseOrTerminalPoint(evt, id) {\r\n//     return id === 'floatingTerminal' \r\n//         ? getMousePosition(evt)\r\n//         : getTerminalPoint(document.getElementById(id))\r\n// }\r\n\r\n// function nodeConnectedToOut(nodeId, wires) {\r\n//     const wireIds = Object.keys(wires)\r\n\r\n//     return wireIds.some(wireId => (\r\n//         wireId.includes('Out') && wireId.includes(nodeId))\r\n//     )\r\n// }\r\n\r\n// function nodeConnectedToChipIn(nodeId, wires) {\r\n//     const wireIds = Object.keys(wires)\r\n\r\n//     return wireIds.some(wireId => (\r\n//         wireId.includes('in') && wireId.includes(nodeId))\r\n//     )\r\n// }\r\n\r\nexport { getMousePosition, terminalConnected, getTerminalPoint, getTerminalType }","import update from 'immutability-helper'\r\nimport { getMousePosition, getTerminalPoint, terminalConnected, getTerminalType } from './WireHelpers'\r\nimport ItemTypes from './ItemTypes'\r\n\r\n\r\n\r\nfunction createFloatingWire(evt, wires, setWires, setFloatingWire) {\r\n    \r\n    const terminalId = evt.target.id\r\n    console.log('WireFuncs > createFloatingWire() : terminalId = ', terminalId)\r\n\r\n    const terminalType = getTerminalType(terminalId)\r\n    console.log('WireFuncs > createFloatingWire() : terminalType = ', terminalType)\r\n\r\n\r\n    const existingWireAtIn = terminalConnected(terminalId, wires)\r\n\r\n    let from, newFloatingWireName\r\n    if (terminalType === ItemTypes.GATE_IN && existingWireAtIn) {\r\n\r\n        console.log(`WireFuncs > createFloatingWire() : ${terminalId} already connected to wire ${existingWireAtIn}, lifting up`)\r\n        \r\n        // let newWires = { ...wires }\r\n        // delete newWires[existingWireAtIn]      \r\n        // setWires(newWires)\r\n\r\n        const fromId = existingWireAtIn.replace(terminalId,'').replace(ItemTypes.WIRE,'')\r\n        console.log('WireFuncs > createFloatingWire() : fromId = ', fromId)\r\n\r\n        from = document.getElementById(fromId)\r\n        newFloatingWireName = fromId + ItemTypes.WIRE + ItemTypes.FLOATING_WIRE + '^' + existingWireAtIn\r\n    }\r\n    else {\r\n        from = document.getElementById(terminalId)\r\n        newFloatingWireName = terminalId + ItemTypes.WIRE + ItemTypes.FLOATING_WIRE\r\n    }\r\n\r\n    const fromPoint = getTerminalPoint(from)\r\n    const toPoint = getMousePosition(evt)\r\n\r\n    let newFloatingWire = {}\r\n    newFloatingWire.name = newFloatingWireName\r\n    newFloatingWire.from = {x: fromPoint.x, y: fromPoint.y} \r\n    newFloatingWire.to = {x: toPoint.x, y: toPoint.y} \r\n    // const newFloatingWire = {\r\n    //     name: newFloatingWireName,\r\n    //     from: {x: fromPoint.x, y: fromPoint.y}, \r\n    //     to: {x: toPoint.x, y: toPoint.y} \r\n    // }\r\n    console.log('WireFuncs > createFloatingWire() : newFloatingWire = ', newFloatingWire)\r\n\r\n    setFloatingWire(newFloatingWire)\r\n}\r\n\r\nfunction dragFloatingWire(evt, floatingWire, setFloatingWire) {\r\n    \r\n    // console.log('WireFuncs > dragFloatingWire() : floatingWire = ', floatingWire)\r\n\r\n    const mousePos = getMousePosition(evt)\r\n    // console.log('WireFuncs > dragFloatingWire() : mousePos = ', mousePos)\r\n    \r\n    setFloatingWire(update(floatingWire, {\r\n        $merge: {\r\n            to: {x: mousePos.x, y: mousePos.y}\r\n        }\r\n    }))\r\n}\r\n\r\nfunction connectedToProvider(terminalIds) {\r\n\r\n    return terminalIds.some(terminalId => {\r\n        console.log('WireFuncs > connectedToProvider() : terminalId = ', terminalId)\r\n\r\n        const terminalType = getTerminalType(terminalId)\r\n        console.log('WireFuncs > connectedToProvider() : terminalType = ', terminalType)\r\n        \r\n        return terminalType === ItemTypes.GATE_OUT || terminalType === ItemTypes.CHIP_IN\r\n    })\r\n}\r\n\r\nfunction getConnectedTerminals(terminalId, wires) {\r\n    const wireIds = Object.keys(wires)\r\n\r\n    let connectedTerminals = []\r\n\r\n    wireIds.forEach(wireId => {\r\n        if (wireId.includes(terminalId)) {\r\n            const connectedTerminal = wireId.replace(ItemTypes.WIRE,'').replace(terminalId,'')\r\n            connectedTerminals.push(connectedTerminal)\r\n        }\r\n    })\r\n\r\n    return connectedTerminals\r\n}\r\n\r\n\r\n\r\nfunction getNetwork(terminalId, wires) {\r\n\r\n    const connectedTerminals = getConnectedTerminals(terminalId, wires)\r\n    console.log('WireFuncs > getNetwork() : connectedTerminals = ', connectedTerminals)\r\n\r\n    let network = {}\r\n    network[terminalId] = connectedTerminals\r\n\r\n    connectedTerminals.forEach(connectedTerminalId => {\r\n        network[connectedTerminalId] = getConnectedTerminals(connectedTerminalId, wires)\r\n    })\r\n    console.log('WireFuncs > getNetwork() : network = ', network)\r\n\r\n    for (var terminal in network) {\r\n        console.log('WireFuncs > getNetwork() : terminal = ', terminal)\r\n\r\n        network[terminal].forEach(connectedTerminal => {\r\n            if (!network[connectedTerminal])\r\n                network[connectedTerminal] = getConnectedTerminals(connectedTerminal, wires)\r\n        })\r\n    }\r\n    console.log('WireFuncs > getNetwork() : network = ', network)\r\n    \r\n    return network\r\n}\r\n\r\nfunction networkContainsProvider(network) {\r\n    let containsProvider = false\r\n\r\n    const networkPoints = Object.keys(network)\r\n    containsProvider = connectedToProvider(networkPoints)\r\n    console.log('WireFuncs > connectFloatingWire() : networkPoints contain provider = ', containsProvider)\r\n\r\n    if (!containsProvider) {\r\n        console.log('WireFuncs > connectFloatingWire() : networkContainsProvider do not contain provider, checking points connected to those points')\r\n\r\n        for (var networkPoint in network) {\r\n            console.log('WireFuncs > connectFloatingWire() : networkPoint = ', networkPoint)\r\n\r\n            containsProvider = connectedToProvider(network[networkPoint])\r\n            console.log('WireFuncs > connectFloatingWire() : containsProvider = ', containsProvider)\r\n\r\n            if (containsProvider) break\r\n        }\r\n    }\r\n    console.log('WireFuncs > connectFloatingWire() : containsProvider', containsProvider)\r\n    return containsProvider\r\n}\r\n\r\nfunction connectFloatingWire(evt, wires, setWires, floatingWire, setFloatingWire) {\r\n\r\n    console.log('WireFuncs > connectFloatingWire() : floatingWire = ', floatingWire)\r\n\r\n    setFloatingWire(null)\r\n\r\n    const sourceTerminalId = floatingWire.name.replace(ItemTypes.FLOATING_WIRE, '').replace(ItemTypes.WIRE, '')\r\n    const sourceNetwork = getNetwork(sourceTerminalId, wires)\r\n    const sourceNetworkContainsProvider = networkContainsProvider(sourceNetwork)\r\n    console.log('WireFuncs > connectFloatingWire() : sourceTerminalId = ', sourceTerminalId)\r\n    console.log('WireFuncs > connectFloatingWire() : sourceNetwork = ', sourceNetwork)\r\n    console.log('WireFuncs > connectFloatingWire() : sourceNetworkContainsProvider = ', sourceNetworkContainsProvider)\r\n\r\n    \r\n    const targetTerminalId = evt.target.id\r\n    const targetNetwork = getNetwork(targetTerminalId, wires)\r\n    const targetNetworkContainsProvider = networkContainsProvider(targetNetwork)\r\n    console.log('WireFuncs > connectFloatingWire() : targetTerminalId =', targetTerminalId)\r\n    console.log('WireFuncs > connectFloatingWire() : targetNetwork = ', targetNetwork)\r\n    console.log('WireFuncs > connectFloatingWire() : targetNetworkContainsProvider = ', targetNetworkContainsProvider)\r\n\r\n    if (sourceNetworkContainsProvider && targetNetworkContainsProvider) {\r\n        console.log('WireFuncs > connectFloatingWire() : cannot connect - both source and target networks contain providers')\r\n        return\r\n    }\r\n\r\n    const floatingWireNameParts = floatingWire.name.split('^')\r\n    console.log('WireFuncs > connectFloatingWire() : floatingWireNameParts = ', floatingWireNameParts)\r\n\r\n    const newWireId = floatingWireNameParts[0].replace(ItemTypes.FLOATING_WIRE, targetTerminalId)\r\n    console.log('WireFuncs > connectFloatingWire() : newWireId = ', newWireId)\r\n\r\n    \r\n    let newWirePoints = {} \r\n    newWirePoints.from = {x: floatingWire.from.x, y: floatingWire.from.y}\r\n    \r\n    const to = document.getElementById(targetTerminalId)\r\n    const toPoint = getTerminalPoint(to)\r\n    newWirePoints.to = {x: toPoint.x, y: toPoint.y}\r\n\r\n    let newWires = { ...wires }\r\n    newWires[newWireId] = newWirePoints\r\n    if (floatingWireNameParts[1]) delete newWires[floatingWireNameParts[1]]\r\n    console.log('WireFuncs > connectFloatingWire() : newWires = ', newWires)\r\n\r\n    setWires(newWires)\r\n}\r\n\r\nfunction updateWires(wires, setWires) {\r\n    console.log('WireFuncs > updateWire() : wires = ', wires)\r\n\r\n    const wireIds = Object.keys(wires)        \r\n    console.log('WireFuncs > updateWire() : wireIds = ', wireIds)\r\n    console.log('WireFuncs > updateWire() : wireIds.length = ', wireIds.length)\r\n\r\n    if (wireIds.length === 0) return \r\n\r\n    let wireChanges = {}\r\n    wireIds.forEach(wireId => {\r\n\r\n        console.log('WireFuncs > updateWire() : wireId = ', wireId)\r\n        \r\n        let fromId = wireId.split('_')[0]\r\n        console.log('WireFuncs > updateWire() : fromId = ', fromId)\r\n        \r\n        // console.log('WireFuncs > updateWire() : updating wiredId = ', wireId)\r\n\r\n        const toId = wireId.split('_')[1]\r\n\r\n        const from = document.getElementById(fromId)\r\n        const to = document.getElementById(toId)\r\n\r\n        // if (from === null || to === null) return\r\n\r\n        const fromPoint = getTerminalPoint(from)\r\n        const toPoint = getTerminalPoint(to)\r\n\r\n        const wireChange = {\r\n            [wireId]: {\r\n                $merge: {\r\n                    from: { x: fromPoint.x, y: fromPoint.y },\r\n                    to: { x: toPoint.x, y: toPoint.y }\r\n                }\r\n            }\r\n        }\r\n\r\n        wireChanges = { ...wireChanges, ...wireChange }\r\n    })\r\n\r\n    console.log('WireFuncs > updateWire : wireChanges = ', wireChanges)\r\n    setWires(update(wires, wireChanges))\r\n}\r\n\r\nexport function updateWiresTerminals(wires, setWires) {\r\n    console.log('WireFuncs > updateWire() : wires = ', wires)\r\n\r\n    const wireIds = Object.keys(wires)        \r\n    console.log('WireFuncs > updateWire() : wireIds = ', wireIds)\r\n    console.log('WireFuncs > updateWire() : wireIds.length = ', wireIds.length)\r\n\r\n    if (wireIds.length === 0) return \r\n\r\n    let wireChanges = {}\r\n    wireIds.forEach(wireId => {\r\n\r\n        console.log('WireFuncs > updateWire() : wireId = ', wireId)\r\n        \r\n        let fromId = wireId.split('_')[0]\r\n        console.log('WireFuncs > updateWire() : fromId = ', fromId)\r\n        \r\n        // console.log('WireFuncs > updateWire() : updating wiredId = ', wireId)\r\n\r\n        const toId = wireId.split('_')[1]\r\n\r\n        const from = document.getElementById(fromId)\r\n        const to = document.getElementById(toId)\r\n\r\n        const fromPoint = getTerminalPoint(from)\r\n        const toPoint = getTerminalPoint(to)\r\n\r\n        const wireChange = {\r\n            [wireId]: {\r\n                $merge: {\r\n                    from: { x: fromPoint.x, y: fromPoint.y },\r\n                    to: { x: toPoint.x, y: toPoint.y }\r\n                }\r\n            }\r\n        }\r\n\r\n        wireChanges = { ...wireChanges, ...wireChange }\r\n    })\r\n\r\n    console.log('WireFuncs > updateWire : wireChanges = ', wireChanges)\r\n    setWires(update(wires, wireChanges))\r\n}\r\n\r\nexport { createFloatingWire, dragFloatingWire, connectFloatingWire, updateWires }","// Find the next available name for a given gate/node\r\nfunction getNextName(gateType, gates) {\r\n\r\n    console.log('GateFuncs > getNextName() : gates = ', gates)\r\n\r\n    let highestNumber = -1\r\n    let currentNumber\r\n\r\n    // Increment suffix for every encounter of the same type,\r\n    // must account for deleted gates\r\n    for (var gate in gates) {                           \r\n        if (gate.includes(gateType)) {\r\n            // console.log('GateFuncs > getNextName() : gate = ', gate)\r\n            // console.log('GateFuncs > getNextName() : gateType = ', gateType)\r\n\r\n            currentNumber = gate.replace(gateType, '')\r\n            // console.log('GateFuncs > getNextName() : currentNumber = ', currentNumber)\r\n\r\n            currentNumber = Number(currentNumber)\r\n            // console.log('GateFuncs > getNextName() : currentNumber = ', currentNumber)\r\n            // console.log('GateFuncs > getNextName() : highestNumber = ', highestNumber)\r\n\r\n            if (currentNumber > highestNumber)\r\n                highestNumber = currentNumber\r\n        }\r\n    }\r\n\r\n    highestNumber++\r\n    \r\n    return gateType + highestNumber.toString()\r\n}\r\n\r\nfunction addChipTerminalNodePoint(chipTerminalId) {\r\n\r\n    console.log('GateFuncs > addChipTerminalNode() : chipTerminalId = ', chipTerminalId)\r\n    const chipInTerminal = document.getElementById(chipTerminalId)            \r\n    \r\n    console.log('GateFuncs : chipInTerminal = ', chipInTerminal)\r\n\r\n    if (!chipInTerminal) return null\r\n\r\n    const terminalBbox = chipInTerminal.getBoundingClientRect()\r\n\r\n    let x\r\n    if (chipTerminalId.includes('in'))          x= terminalBbox.right\r\n    else if (chipTerminalId.includes('out'))    x= terminalBbox.left\r\n\r\n    let y = terminalBbox.top + terminalBbox.height/2\r\n    \r\n    const svg = document.getElementById('svg')\r\n    const pt = svg.createSVGPoint()\r\n    pt.x = x\r\n    pt.y = y\r\n\r\n    const svgP = pt.matrixTransform(svg.getScreenCTM().inverse());\r\n    x = svgP.x-100/2    // not sure why 50 is a good value but it shows up again here\r\n    y = svgP.y-100/2\r\n\r\n    const translation = `${x} ${y}`\r\n    console.log(`GateFuncs > addChipTerminalNode() : translation = ${translation}`)\r\n\r\n    // return translation\r\n    return {x: x, y: y}\r\n}\r\n\r\nfunction addNewChipTerminalNode(inOuts) {\r\n    \r\n    let newGates = {}\r\n\r\n    for (var inOut in inOuts) {\r\n\r\n        console.log('Build > addChipTerminalNode() : inOut = ', inOut)\r\n\r\n        const chipNodePoint = addChipTerminalNodePoint(inOut)\r\n\r\n        newGates[inOut+'Node'] = {\r\n            left: chipNodePoint.x,\r\n            top: chipNodePoint.y\r\n        }\r\n    }\r\n\r\n    return newGates\r\n}\r\n\r\nexport { getNextName, addNewChipTerminalNode }","import React, { createContext, useState, useEffect } from 'react'\r\n\r\nimport { updateWires } from './WireFuncs'\r\nimport { addChipTerminalNode } from './GateFuncs'\r\n\r\n\r\nconst ChipInsContext            = createContext([{}, () => {}])\r\nconst ChipOutsContext           = createContext([{}, () => {}])\r\nconst GatesContext              = createContext([{}, () => {}])\r\nconst WiresContext              = createContext([{}, () => {}])\r\nconst FloatingWireContext       = createContext([null, () => {}])\r\nconst SelectedElementContext    = createContext([null, () => {}])\r\n\r\n\r\nconst defaultChipIns    = false     ?   { in0: {value: 0, connectedTo: null} }              : {}\r\nconst defaultChipOuts   = false     ?   { out0: {value: 0, connectedTo: null} }             : {}\r\n// const defaultGates      = true      ?   { Nand0: {left: 209.5, top: 64, rotation: 0} }      : {}\r\nconst defaultGates      = true      ?   { Nand0: {left: 209.5, top: 64, rotation: 0}, Nand1: {left: 400.5, top: 90, rotation: 0} }      : {}\r\nconst defaultWires      = false     ?   { \r\n    Nand0Out_Nand1InA: { from: {x: 309.5, y: 114}, to: {x: 400.5, y: 125} }, \r\n    Nand0Out_Nand0InA: { from: {x: 500.5, y: 200}, to: {x: 300.5, y: 200} } \r\n}      : {}\r\n\r\n\r\n\r\nconst BuildContextProvider = (props) => {\r\n    \r\n\tconst [chipIns, setChipIns]                     = useState(defaultChipIns)\r\n    const [chipOuts, setChipOuts]                   = useState(defaultChipOuts)\r\n    const [gates, setGates]                         = useState(defaultGates)\r\n\tconst [wires, setWires]                         = useState(defaultWires)\r\n    const [floatingWire, setFloatingWire]           = useState(null)\r\n    const [selectedElement, setSelectedElement]     = useState(null)\r\n\r\n\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n    useEffect(()=>updateWires(wires, setWires), [gates, chipIns])\r\n\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    useEffect(() => addChipTerminalNode(chipIns, chipOuts, gates, setGates), [chipIns, chipOuts])\r\n\t\r\n    return (\r\n        <ChipInsContext.Provider value={[chipIns, setChipIns]}>\r\n            <ChipOutsContext.Provider value={[chipOuts, setChipOuts]}>\r\n                <GatesContext.Provider value={[gates, setGates]}>\r\n                    <WiresContext.Provider value={[wires, setWires]}>\r\n                        <FloatingWireContext.Provider value={[floatingWire, setFloatingWire]}>\r\n                            <SelectedElementContext.Provider value={[selectedElement, setSelectedElement]}>\r\n                                {props.children}\r\n                            </SelectedElementContext.Provider>\r\n                        </FloatingWireContext.Provider>\r\n                    </WiresContext.Provider>\r\n                </GatesContext.Provider>\r\n            </ChipOutsContext.Provider>\r\n        </ChipInsContext.Provider>\r\n    )\r\n}\r\n\r\nexport { BuildContextProvider, ChipInsContext, ChipOutsContext, GatesContext, WiresContext, FloatingWireContext, SelectedElementContext }","import update from 'immutability-helper'\r\nimport { getMousePosition, getTerminalPoint } from './WireHelpers'\r\nimport { getNextName, addNewChipTerminalNode } from './GateHelpers'\r\nimport ItemTypes from './ItemTypes'\r\n\r\n\r\n// Add a gate to dnd dropzone\r\nfunction addGate(evt, gateId, gates, setGates) {\r\n\r\n    //TODO: consider getting gateId from evt.dataTransfer.getData('text')\r\n    gateId = gateId.replace('new', '')                                  // deduce gate to drop\r\n    console.log('GateFuncs > addGate() : gateId = ', gateId)\r\n\r\n    console.log('GateFuncs > addGate() : gates = ', gates)\r\n    gateId = getNextName(gateId, gates)                           // find next number up for the given gate\r\n    console.log('GateFuncs > addGate() : gateId = ', gateId)\r\n\r\n    const mousePos = getMousePosition(evt)\r\n    const top = mousePos.y - 100/2              //TODO: figure out why 100/2\r\n    const left = mousePos.x - 100/2\r\n\r\n    let newGates = { ...gates }\r\n    newGates[gateId] = { top: top, left: left, rotation: 0 }      // add new gate with its info\r\n\r\n    console.log('GateFuncs > addGate() : newGates = ', newGates)\r\n    setGates(newGates)\r\n}\r\n\r\nfunction addNode(evt, gates, setGates, wires, setWires) {\r\n\r\n    // evt.preventDefault()\r\n\r\n    let wireId = evt.target.id\r\n    console.log('GateFuncs > addNode() : wireId = ', wireId)\r\n\r\n    const id = getNextName('Node', gates)\r\n    console.log('GateFuncs > addNode() : id = ', id)\r\n\r\n    let newGates = { ...gates }\r\n    const mousePos = getMousePosition(evt)\r\n\r\n    newGates[id] = { \r\n        left: mousePos.x - 100/2, //TODO: figure out why 100/2 (or 50)\r\n        top: mousePos.y - 100/2, \r\n        rotation: 0 \r\n    }\r\n\r\n    console.log('GateFuncs > addNode() : newGates = ', newGates)\r\n    setGates(newGates)\r\n\r\n    const fromId = wireId.split(ItemTypes.WIRE)[0]\r\n    const toId = wireId.split(ItemTypes.WIRE)[1]\r\n    console.log('GateFuncs > addNode() : fromId = ', fromId)\r\n    console.log('GateFuncs > addNode() : toId = ', toId)\r\n\r\n    const from = document.getElementById(fromId)\r\n    const to = document.getElementById(toId)\r\n    console.log('GateFuncs > addNode() : from = ', from)\r\n    console.log('GateFuncs > addNode() : to = ', to)\r\n\r\n    const fromPoint = getTerminalPoint(from)\r\n    const toPoint = getTerminalPoint(to)\r\n\r\n    let newWires = { ...wires }\r\n\r\n    newWires[fromId + ItemTypes.WIRE + id + ItemTypes.NODE_CENTER] = {\r\n        from: {x: fromPoint.x, y: fromPoint.y},\r\n        to: {x: mousePos.x, y: mousePos.y}\r\n    }\r\n      \r\n    newWires[id + ItemTypes.NODE_CENTER + ItemTypes.WIRE + toId] = {\r\n        from: {x: mousePos.x, y: mousePos.y},\r\n        to: {x: toPoint.x, y: toPoint.y}\r\n    }\r\n\r\n    delete newWires[wireId]\r\n\r\n    console.log('GateFuncs > addNode() : newWires = ', newWires)\r\n    setWires(newWires)\r\n}\r\n   \r\nfunction rotateGate(id, gates, setGates) {\r\n\r\n    const gateId = id.replace('Body', '')   // deduce gate id from gate body\r\n    console.log('GateFuncs > rotateGate() : gateId = ', gateId)\r\n\r\n    const newRotation = (gates[gateId].rotation + 90) % 360     // rotate 90deg clockwise\r\n    console.log('GateFuncs > rotateGate() : newRotation = ', newRotation)\r\n\r\n    // For the given gate, modify current rotation with new rotation\r\n    setGates(update(gates, {\r\n        [gateId]: {\r\n            $merge: {\r\n                rotation: newRotation\r\n            }\r\n        }\r\n    }))\r\n}\r\n\r\n\r\nfunction addChipTerminalNode(inputs, outputs, gates, setGates) {\r\n    \r\n    let newGates = gates\r\n\r\n    const inputNodes = addNewChipTerminalNode(inputs)\r\n    const outputNodes = addNewChipTerminalNode(outputs)\r\n\r\n    newGates = { ...newGates, ...inputNodes, ...outputNodes }\r\n\r\n    setGates({ ...newGates })\r\n}\r\n\r\nexport { addGate, rotateGate, addNode, addChipTerminalNode }","import React from 'react'\r\nimport { DragLayer } from 'react-dnd'\r\n\r\nimport Nand from '../../../Gates/Nand'\r\nimport Node from '../../../Gates/Node'\r\nimport { getTerminalPoint } from '../WireHelpers'\r\n\r\nimport { useContext } from 'react'\r\nimport { WiresContext } from '../BuildContext'\r\n\r\nconst dragOpacity = 0.3\r\n\r\n// Generate preview with proper rotation and offsets from mouse cursor\r\nconst draggedGateStyle = (item, currentOffset) => {\r\n\r\n    // console.log('DragPreview > defaultStyle() : item = ', item)\r\n\r\n    const gate = document.getElementById(item.id)\r\n    // console.log('DragPreview > defaultStyle() : gate = ', gate)\r\n\r\n    const gateParent = gate.parentElement\r\n    // console.log('DragPreview > defaultStyle() : gateParent = ', gateParent)\r\n\r\n    const transform = gateParent.transform\r\n    // console.log('DragPreview > defaultStyle() : transform = ', transform)\r\n    \r\n    const rotation = transform.baseVal['1'].angle\r\n    // console.log('DragPreview > defaultStyle() : rotation = ', rotation)\r\n    \r\n    // Calculate proper offsets\r\n    //TODO: make dynamic?\r\n    let left, top\r\n    if (!item.id.includes('Node')) {\r\n        switch(rotation) {\r\n            case 0:\r\n                left = 0\r\n                top = -25\r\n                break\r\n            case 90:\r\n                left = -150\r\n                top = 75\r\n                break\r\n            case 180:\r\n                left = -200\r\n                top = -75\r\n                break\r\n            case 270:\r\n                left = -100\r\n                top = -125\r\n                break\r\n            default:\r\n                break\r\n        }\r\n    }\r\n    else if (item.id.includes('Node')) {\r\n        switch(rotation) {\r\n            case 0:\r\n                left = -45\r\n                top = -45\r\n                break\r\n            case 90:\r\n                left = -150\r\n                top = 75\r\n                break\r\n            case 180:\r\n                left = -200\r\n                top = -75\r\n                break\r\n            case 270:\r\n                left = -100\r\n                top = -125\r\n                break\r\n            default:\r\n                break\r\n        }\r\n    }\r\n\r\n    return (\r\n        {\r\n            left: currentOffset.x+left,\r\n            top: currentOffset.y+top,\r\n            position: 'fixed',\r\n            opacity: dragOpacity,\r\n            transform: `rotate(${rotation}deg)`,\r\n        }\r\n    )\r\n}\r\n\r\nconst overlaySvgStyle = () => {\r\n\r\n    // Needed to imitate position of Target's svg, must be calculated here and not outside this function\r\n    const svgBbox = document.getElementById('svg').getBoundingClientRect()\r\n    const paperBbox = document.getElementById('paper').getBoundingClientRect()\r\n\r\n    //TODO: see if some of these can be placed in theme and be shared with Target svg\r\n    return (\r\n        {\r\n            opacity: dragOpacity,\r\n            // imitate Target svg border to supperpose that svg with this one perfectly\r\n            borderWidth: 3,\r\n            borderStyle: 'dashed',\r\n            borderColor: 'red',\r\n            borderRadius: 3,\r\n            // backgroundColor: 'red',\r\n            position: 'absolute',\r\n            left: svgBbox.left-paperBbox.left,\r\n            top: svgBbox.top-paperBbox.top,\r\n            zIndex: 1999,   // set original zindex in theme and then use it here + 1 ? doesn't seem to have much an effect but it also might fix pointer events while dragging\r\n            width: svgBbox.width,\r\n            height: svgBbox.height\r\n\r\n        }\r\n    )\r\n}\r\n\r\n//TODO: see if you can do without this, or maybe use ItemTypes\r\nconst gateTypes = {\r\n    'Node': Node,\r\n    'Nand': Nand\r\n}\r\n\r\nfunction getConnectedWires(gateId, wires) {\r\n    // console.log('DragPreview > getConnectedWires() : gateId = ', gateId)\r\n    // console.log('DragPreview > getConnectedWires() : wires = ', wires)\r\n\r\n    const wireIds = Object.keys(wires)\r\n    // console.log('DragPreview > getConnectedWires() : wireIds = ', wireIds)\r\n\r\n    let connectedWires = {}\r\n    wireIds.forEach(wireId => {\r\n        // console.log('DragPreview > getConnectedWires() : wireId = ', wireId)\r\n        \r\n        if (wireId.includes(gateId)) {\r\n            connectedWires[wireId] = {\r\n                from: {x: null, y: null}, \r\n                to: {x: null, y: null}\r\n            }\r\n        }\r\n\r\n    })\r\n    // console.log('DragPreview > getConnectedWires() : connectedWires = ', connectedWires)\r\n\r\n    return connectedWires\r\n}\r\n\r\nfunction moveConnectedWires(gateId, wires, currentOffset) {\r\n    // console.log('DragPreview > moveConnectedWires() : gateId = ', gateId)\r\n    // console.log('DragPreview > moveConnectedWires() : wires = ', wires)\r\n\r\n    const wireIds = Object.keys(wires)\r\n    let newWires = wires\r\n    wireIds.forEach(wireId => {\r\n\r\n        console.log('DragPreview > moveConnectedWires() : wireId = ', wireId)\r\n        \r\n        const fromId = wireId.split('_')[0]\r\n        const toId = wireId.split('_')[1]\r\n        console.log('DragPreview > moveConnectedWires() : fromId = ', fromId)\r\n        console.log('DragPreview > moveConnectedWires() : toId = ', toId)\r\n\r\n        const from = document.getElementById(fromId)\r\n        const to = document.getElementById(toId)\r\n        console.log('DragPreview > moveConnectedWires() : from = ', from)\r\n        console.log('DragPreview > moveConnectedWires() : to = ', to)\r\n\r\n        if (!from && !to) return\r\n\r\n        const fromPoint = getTerminalPoint(from)\r\n        const toPoint = getTerminalPoint(to)\r\n        console.log('DragPreview > moveConnectedWires() : fromPoint = ', fromPoint)\r\n        console.log('DragPreview > moveConnectedWires() : toPoint = ', toPoint)\r\n\r\n\r\n        const bboxGate = document.getElementById(gateId).getBoundingClientRect()\r\n        // console.log('DragPreview > moveConnectedWires() : bboxGate = ', bboxGate)\r\n\r\n        const diff = {\r\n            x: currentOffset.x-bboxGate.x, \r\n            y: currentOffset.y-bboxGate.y\r\n        }\r\n\r\n        if (fromId.includes(gateId)) {\r\n            newWires[wireId] = {\r\n                from: {x: fromPoint.x+diff.x, y: fromPoint.y+diff.y}, \r\n                to: {x: toPoint.x, y: toPoint.y}\r\n            } \r\n        }\r\n        else if (toId.includes(gateId)) {\r\n            newWires[wireId] = {\r\n                from: {x: fromPoint.x, y: fromPoint.y},\r\n                to: {x: toPoint.x+diff.x, y: toPoint.y+diff.y} \r\n            } \r\n        }           \r\n    })\r\n\r\n    return newWires\r\n}\r\n\r\n\r\nconst DragPreview = ({ isDragging, currentOffset, item }) => {\r\n\r\n    // eslint-disable-next-line no-unused-vars\r\n    const [wires, setWires] = useContext(WiresContext)\r\n\r\n    // console.log('DragPreview : item = ', item)\r\n\r\n    let Gate\r\n    let connectedWires = {}\r\n    let draggedWires = {}\r\n    if (isDragging && currentOffset) {\r\n        const type = item.id.replace(/[0-9]/g, '')      // deduce gate type from id\r\n        // console.log('DragPreview > DragPreview() : id = ', id)\r\n        \r\n        Gate = gateTypes[type]                          // convert string to function\r\n        //TODO: see if you can do without gateTypes\r\n        // Gate = document.getElementById(item.id)  \r\n\r\n        connectedWires = getConnectedWires(item.id, wires)     // get all wires connected to currently dragged gate\r\n        // console.log('DragPreview > DragPreview() : connectedWires = ', connectedWires)\r\n    \r\n        draggedWires = moveConnectedWires(item.id, connectedWires, currentOffset)   // follow gate with all attached wires \r\n    }\r\n\r\n    // console.log('DragPreview : draggedWires = ', draggedWires)\r\n\r\n    // Only render preview while dragging and if requested (likely always the case)\r\n    return (\r\n        !isDragging || !currentOffset || !item.withDragPreview ?\r\n            null\r\n            :\r\n            <>\r\n                {/* The gate preview */}\r\n                <svg style={draggedGateStyle(item, currentOffset)}>\r\n                    <Gate id={item.id} />\r\n                </svg>\r\n\r\n                {/* The wire preview */}\r\n                {/* Overlay a copy of Target's svg */}\r\n                <svg style={overlaySvgStyle()}>\r\n                    {Object.keys(draggedWires).map(id => {\r\n                        const { from, to } = draggedWires[id]\r\n                        return (\r\n                            <line \r\n                                key={id}\r\n                                id={id}\r\n                                stroke='black' //TODO: get from theme?\r\n                                strokeWidth='3'  \r\n                                x1={from.x}\r\n                                y1={from.y}\r\n                                x2={to.x}\r\n                                y2={to.y}\r\n                                style={{ pointerEvents: 'none' }}\r\n                            />\r\n                        )\r\n                    })}\r\n                </svg>\r\n            </>\r\n    )\r\n}\r\n\r\n// The rest is react-dnd mumbo-jumbo\r\n\r\nexport default DragLayer(monitor => ({\r\n    item: monitor.getItem(),\r\n    itemType: monitor.getItemType(),\r\n    currentOffset: monitor.getSourceClientOffset(),\r\n    isDragging: monitor.isDragging()\r\n}))(DragPreview)\r\n\r\n","export default {\r\n  BOX: 'box',\r\n  CSV: 'csv'\r\n}","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\n\r\n// import ItemTypes from './ItemTypes'\r\nimport { DragSource } from 'react-dnd'\r\n\r\nimport Nand from '../../../Gates/Nand'\r\nimport Node from '../../../Gates/Node'\r\nimport { theme } from '../../../theme'\r\n\r\nimport ItemTypes from '../ItemTypes'\r\n\r\n//TODO: consider using general ItemTypes for this?\r\nconst gateTypes = {\r\n    [ItemTypes.CHIP_IN+ItemTypes.NODE]: Node,\r\n    [ItemTypes.CHIP_OUT+ItemTypes.NODE]: Node,\r\n    [ItemTypes.NODE]: Node,\r\n    [ItemTypes.NAND]: Nand\r\n}\r\n\r\n// Functions ran right before drag\r\nconst boxSource = {\r\n\r\n    // Gather info on dragged item\r\n    beginDrag({ id, left, top, }, monitor, component) {\r\n        console.log('Source > boxSource > beginDrag() : id = ', id)\r\n        return { id, left, top, withDragPreview: true }\r\n    },\r\n\r\n    // Don't allow gate drag while dragging floatingWire\r\n    canDrag(props, monitor) {\r\n        console.log('Source > boxSource > beginDrag() : props.floatingWire = ', props.floatingWire)\r\n        return !props.floatingWire\r\n    }\r\n}\r\n\r\n// General container for draggable gates/nodes\r\nconst Source = ({ hideSourceOnDrag, left, top, rotation, connectDragSource, isDragging, id, selected=false }) => {\r\n\r\n    console.log('Source : id = ', id)\r\n\r\n    if (isDragging && hideSourceOnDrag) return\r\n\r\n    // Ensure nodes are never rotated\r\n    if (id.includes(ItemTypes.NODE)) rotation = 0\r\n\r\n    // Adjust dragged gate position with respect to mouse cursor\r\n    //TODO: make values dynamic *maybe play around with transformOrigin more?)\r\n    switch(rotation) {\r\n        // case 0:\r\n        //     left = left\r\n        //     top = top - 50\r\n        case 90:\r\n            left = left + 95\r\n            top = top + 5\r\n            break\r\n        case 180:\r\n            left = left + 85\r\n            top = top + 100\r\n            break\r\n        case 270:\r\n            left = left - 5\r\n            top = top + 95\r\n            break\r\n        default:\r\n            break\r\n    }\r\n\r\n    const translation = `${left} ${top}`\r\n    // console.log('Source : translation = ', translation)\r\n\r\n    const type = id.replace(/[0-9]/g, '')       // deduce gate type from id\r\n    // console.log('Source : type = ', type)\r\n\r\n    //TODO: see if you can use general ItemTypes\r\n    const Gate = gateTypes[type]                // convert string to function\r\n    // console.log('Source : Gate = ', Gate)\r\n\r\n    // console.log('Source : selected = ', selected)\r\n\r\n    // Svg tag needed only to define filter\r\n    return connectDragSource(\r\n        <svg>\r\n            {console.log('Source: connectDragSource() : id = ', id)}\r\n            {/* Define glow effect */}\r\n            <defs>\r\n                <filter id=\"glow\" x=\"-20\" y=\"0\" width=\"100%\" height=\"100%\" filterUnits=\"userSpaceOnUse\">\r\n                    <feOffset result=\"offOut\" in=\"SourceGraphic\" dx=\"0\" dy=\"0\" />\r\n                    <feGaussianBlur result=\"blurOut\" in=\"offOut\" stdDeviation=\"10\" />\r\n                    <feBlend in=\"SourceGraphic\" in2=\"blurOut\" mode=\"normal\" />\r\n                </filter>\r\n            </defs>\r\n\r\n            {/* Wrap gate with g tag to move it around and apply filter */}\r\n            <g \r\n                transform={`translate(${translation}) rotate(${rotation})`} \r\n                filter={ selected ? \"url(#glow)\" : null}\r\n            >\r\n                <Gate \r\n                    id={id} \r\n                    stroke={ selected ? theme.palette.primary.light : 'black' } \r\n                    fill={ selected ? theme.palette.primary.light : 'black' }\r\n                />\r\n            </g>\r\n        </svg>\r\n    )\r\n}\r\n\r\n// The rest is all react-dnd mumbo-jumbo\r\n\r\nSource.propTypes= {\r\n    connectDragSource: PropTypes.func.isRequired,\r\n    isDragging: PropTypes.bool.isRequired,\r\n    id: PropTypes.any.isRequired,\r\n    left: PropTypes.number.isRequired,\r\n    top: PropTypes.number.isRequired,\r\n    hideSourceOnDrag: PropTypes.bool.isRequired,\r\n    children: PropTypes.node\r\n}\r\n\r\nconst connect = (connect, monitor) => (\r\n    {\r\n        connectDragSource: connect.dragSource(),\r\n        isDragging: monitor.isDragging()\r\n    }\r\n)\r\n\r\n//TODO: see if it should really be ItemTypes.BOX, or maybe even something else?\r\nexport default DragSource(ItemTypes.CSV, boxSource, connect)(Source)","import React, { useState } from 'react'\r\nimport { theme } from '../../../theme'\r\n\r\n\r\nexport default ({ id, floatingWire, creatingNode, from, to, setCreatingNode, selected }) => {\r\n    \r\n    console.log('Wire : floatingWire = ', floatingWire)\r\n\r\n    const [strokeColor, setStrokeColor] = useState('black')\r\n\r\n    return (\r\n        <svg>\r\n            <defs>\r\n                <filter id=\"f1\" x=\"0\" y=\"0\" width=\"100%\" height=\"100%\" filterUnits=\"userSpaceOnUse\">\r\n                    <feOffset result=\"offOut\" in=\"SourceGraphic\" dx=\"0\" dy=\"0\" />\r\n                    <feGaussianBlur result=\"blurOut\" in=\"offOut\" stdDeviation=\"10\" />\r\n                    <feBlend in=\"SourceGraphic\" in2=\"blurOut\" mode=\"normal\" />\r\n                </filter>\r\n            </defs>\r\n            <line \r\n                key={id}\r\n                id={id}\r\n                // stroke={\r\n                //     (floatingWire && floatingWire.includes(id)) ||\r\n                //     (creatingNode === id) ||\r\n                //     selected\r\n                //         ? 'purple' \r\n                //         : 'black'\r\n                // }  \r\n                stroke={selected ? theme.palette.primary.light : strokeColor}\r\n                opacity={floatingWire && floatingWire.name.includes(id) ? 0.3 : 1 }\r\n                strokeWidth='3' \r\n                x1={from.x}\r\n                y1={from.y}\r\n                x2={to.x}\r\n                y2={to.y}\r\n                style={{ pointerEvents: floatingWire ? 'none' : 'all', boxShadow:'10px 10px' }} //TODO: get floatingWire from Context?\r\n                onMouseOver={()=>{setCreatingNode(id); setStrokeColor(theme.palette.primary.light)}}\r\n                onMouseOut={()=>{setCreatingNode(null); setStrokeColor('black')}}\r\n                filter={ selected ? \"url(#f1)\" : null}\r\n            />\r\n        </svg>\r\n    )\r\n}","import { addGate, rotateGate, addNode } from '../GateFuncs'\r\nimport { createFloatingWire, dragFloatingWire, connectFloatingWire } from '../WireFuncs'\r\n\r\nimport ItemTypes from '../ItemTypes' \r\n\r\n// Receive new gate into drop zone\r\n//TODO: consider adding chip in and out dropzones\r\nfunction handleDrop(evt, gates, setGates) {\r\n\r\n    evt.preventDefault()    //TODO: see if necessary\r\n\r\n    let id = evt.dataTransfer.getData('text')\r\n    console.log('TargetFuncs > handleDrop() : id = ', id)\r\n\r\n    if (id.includes('new'))\r\n        addGate(evt, id, gates, setGates) //TODO: consider passing only evt and not id\r\n}\r\n\r\n// Rotate gate or add node\r\nfunction handleDoubleClick(evt, gates, setGates, wires, setWires) {\r\n        \r\n    const id = evt.target.id\r\n    console.log('TargetFuncs > handleDoubleClick() : id = ', id)\r\n\r\n    if (id.includes(ItemTypes.BODY))\r\n        rotateGate(id, gates, setGates)\r\n    else if (id.includes(ItemTypes.WIRE))\r\n        addNode(evt, gates, setGates, wires, setWires)\r\n}\r\n\r\n// Create a floating wire to be dragged onmousemove\r\nfunction handleMouseDown(evt, wires, setWires, setFloatingWire) {\r\n    \r\n    const id = evt.target.id\r\n    console.log('TargetFuncs > handleMouseDown() : id = ', id)\r\n\r\n    if (id.includes(ItemTypes.WIRE)) return\r\n\r\n    if (id.includes(ItemTypes.GATE_IN) || id.includes(ItemTypes.GATE_OUT) || id.includes(ItemTypes.CENTER))\r\n        createFloatingWire(evt, wires, setWires, setFloatingWire)\r\n}\r\n\r\n// Drag floating wire that was created onmouseup\r\nfunction handleMouseMove(evt, floatingWire, setFloatingWire) {\r\n    // console.log('TargetFuncs > handleMouseMove() : evt.target.id = ', evt.target.id)\r\n    // console.log('TargetFuncs > handleMouseMove() : state.floatingWire = ', state.floatingWire)\r\n    \r\n    if (floatingWire) \r\n        dragFloatingWire(evt, floatingWire, setFloatingWire)\r\n}\r\n\r\nfunction handleMouseUp(evt, wires, setWires, floatingWire, setFloatingWire) {\r\n       \r\n    console.log('TargetFuncs > handleMouseUp() : floatingWire = ', floatingWire)\r\n\r\n    if (floatingWire) {\r\n\r\n        const id = evt.target.id\r\n        console.log('TargetFuncs > handleMouseUp() : id = ', id)\r\n\r\n        if (id.includes(ItemTypes.GATE_IN) || id.includes(ItemTypes.GATE_OUT) || id.includes(ItemTypes.CENTER))\r\n            connectFloatingWire(evt, wires, setWires, floatingWire, setFloatingWire)\r\n        else {\r\n            console.log('TargetFuncs > handleMouseUp() : no suitable target for floating wire, removing floating wire...')\r\n            \r\n            let newWires = { ...wires }\r\n            const existingWireAtIn = floatingWire.name.split('^')[1]\r\n            delete newWires[existingWireAtIn]      \r\n            setWires(newWires)\r\n            setFloatingWire(null)\r\n        }\r\n    }\r\n}\r\n\r\nexport { handleDrop, handleDoubleClick, handleMouseDown, handleMouseMove, handleMouseUp }","import React, { useState } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport update from 'immutability-helper'\r\n\r\nimport ItemTypes from './ItemTypes'\r\nimport Source from './Source'\r\nimport { DropTarget } from 'react-dnd'\r\n\r\nimport Wire from './Wire'\r\n\r\nimport { theme } from '../../../theme'\r\n\r\nimport Node from '../../../Gates/Node'\r\n\r\nimport { useContext } from 'react'\r\nimport { GatesContext, WiresContext, FloatingWireContext, SelectedElementContext } from '../BuildContext'\r\n\r\n\r\nimport { \r\n    handleDrop, \r\n    handleDoubleClick, \r\n    handleMouseDown, \r\n    handleMouseMove, \r\n    handleMouseUp\r\n} from './TargetFuncs'\r\n\r\n\r\n\r\nlet percent = 0.6\r\nlet factor = 0.7\r\nconst styles = {\r\n    position: 'absolute',\r\n    top: '50%',\r\n    left: '50%',\r\n    transform: 'translate(-50%,-50%)',\r\n    width: 1600*percent*factor,\r\n    height: 900*percent*factor,\r\n    borderWidth: 3,\r\n    borderStyle: 'dashed',\r\n    borderColor: theme.palette.primary.light,\r\n    borderRadius: 3,\r\n    zIndex: 1001,\r\n}\r\n\r\nconst boxTarget = {\r\n    drop(props, monitor, component) {   // component is null when using functional components so I can't do component.moveBox, needs Target to be a class so I had to workaround\r\n        const item = monitor.getItem()\r\n        const delta = monitor.getDifferenceFromInitialOffset()\r\n        const left = Math.round(item.left + delta.x)\r\n        const top = Math.round(item.top + delta.y)\r\n\r\n        moveBox(item.id, left, top)\r\n    }\r\n}\r\n\r\nlet moveBox = () => null  // global variable to rewrite in Target but used in boxTarget\r\n\r\nconst Target = ({ hideSourceOnDrag, connectDropTarget, selectedElement }) => {\r\n\r\n    const [creatingNode, setCreatingNode] = useState(null) //TODO: check if needed\r\n\r\n    const [gates, setGates] = useContext(GatesContext)\r\n    const [wires, setWires] = useContext(WiresContext)\r\n    const [floatingWire, setFloatingWire] = useContext(FloatingWireContext)\r\n    // const [floatingWire, setFloatingWire] = useState(null)  // musn't include in context because it rerenders a lot of higher components\r\n    // const [selectedElement, setSelectedElement] = useContext(SelectedElementContext)\r\n\r\n    console.log('Target : gates = ', gates)\r\n    console.log('Target : wires = ', wires)\r\n    console.log('Target : floatingWire = ', floatingWire)\r\n    console.log('Target : selectedElement = ', selectedElement)\r\n\r\n\r\n    \r\n    moveBox = (id, left, top) => {\r\n        setGates(update(gates, {\r\n            [id]: {\r\n                $merge: {\r\n                    left: left,\r\n                    top: top\r\n                }\r\n            }\r\n        }))\r\n    }\r\n\r\n    return connectDropTarget(\r\n        <svg \r\n            id='svg' \r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            style={styles} \r\n            onDrop={evt=>handleDrop(evt, gates, setGates)} \r\n            onDoubleClick={evt=>handleDoubleClick(evt, gates, setGates, wires, setWires)} \r\n            onMouseDown={evt=>handleMouseDown(evt, wires, setWires, setFloatingWire)}\r\n            onMouseMove={evt=>handleMouseMove(evt, floatingWire, setFloatingWire)}\r\n            onMouseUp={evt=>handleMouseUp(evt, wires, setWires, floatingWire, setFloatingWire)}                         \r\n        >\r\n            {Object.keys(wires).map(id => {\r\n                const { from, to } = wires[id]\r\n                return (\r\n                    <Wire\r\n                        key={id}\r\n                        id={id}\r\n                        from={from}\r\n                        to={to}\r\n                        floatingWire={floatingWire}\r\n                        creatingNode={creatingNode} //TODO: check if needed\r\n                        setCreatingNode={setCreatingNode} //TODO: check if needed\r\n                        selected={selectedElement === id ? true : false}\r\n                    />\r\n                )\r\n            })}\r\n            {floatingWire &&\r\n                <line\r\n                    // id={ItemTypes.FLOATING_WIRE}\r\n                    x1={floatingWire.from.x}\r\n                    y1={floatingWire.from.y}\r\n                    x2={floatingWire.to.x}\r\n                    y2={floatingWire.to.y}\r\n                    stroke={theme.palette.primary.light}\r\n                    strokeWidth='3'\r\n                    style={{ pointerEvents: 'none' }}\r\n                />\r\n            }\r\n            {Object.keys(gates).map(id => {\r\n\r\n                const { left, top, rotation } = gates[id]\r\n                console.log('Target : id = ', id)\r\n\r\n                if (!id.includes(ItemTypes.CHIP_IN) && !id.includes(ItemTypes.CHIP_OUT)) { \r\n                    return (\r\n                        <Source \r\n                            key={id}\r\n                            id={id}\r\n                            left={left}\r\n                            top={top}\r\n                            rotation={rotation}\r\n                            floatingWire={floatingWire}   // prevents gate from being dragged while pulling terminal\r\n                            hideSourceOnDrag={hideSourceOnDrag}\r\n                            selected={selectedElement === id ? true : false}\r\n                        />\r\n                    )\r\n                }\r\n                else {\r\n                    return (\r\n                        <g \r\n                            key={id} \r\n                            transform={`translate(${left} ${top})`}\r\n                        >\r\n                            <Node \r\n                                id={id}\r\n                                stroke='black'\r\n                                fill='black'\r\n                            />\r\n                        </g>\r\n                    )\r\n                }\r\n            })}\r\n        </svg>\r\n    )\r\n}\r\n\r\n// The rest is react-dnd mumbo-jumbo\r\n\r\nTarget.propTypes = {\r\n    hideSourceOnDrag: PropTypes.bool.isRequired,\r\n    connectDropTarget: PropTypes.func.isRequired\r\n}\r\n\r\nexport default DropTarget(ItemTypes.CSV, boxTarget, (connect, monitor) => ({\r\n    connectDropTarget: connect.dropTarget(),\r\n    isOver: monitor.isOver(),\r\n}))(Target)","import React from 'react'\r\n\r\nimport { DndProvider } from 'react-dnd'\r\nimport MouseBackEnd from 'react-dnd-mouse-backend'\r\n\r\nimport DragPreview from './DragPreview'\r\nimport Target from './Target'\r\n\r\n\r\nexport default ({ gates, setGates, wires, setWires, selectedElement, floatingWire, setFloatingWire }) => (\r\n    <DndProvider backend={MouseBackEnd}>\r\n        {/* <Target hideSourceOnDrag={false} gates={gates} setGates={setGates} wires={wires} setWires={setWires} selectedElement={selectedElement} floatingWire={floatingWire} setFloatingWire={setFloatingWire} /> */}\r\n        {/* <DragPreview wires={wires} /> */}\r\n        <Target hideSourceOnDrag={false} selectedElement={selectedElement} />\r\n        <DragPreview />\r\n    </DndProvider>\r\n)","import ItemTypes from './ItemTypes'\r\n\r\nfunction handleDragOver(evt) {\r\n    evt.preventDefault()\r\n    // setDragAreaVisible(true)\r\n}\r\n\r\nfunction addRemoveChipTerminal(title, chipInOuts, setChipInOuts, incDec, gates, setGates, wires, setWires) {\r\n\r\n    let newChipInOuts = { ...chipInOuts }\r\n    let numInOuts = Object.keys(chipInOuts).length\r\n    console.log('BuildFuncs > handleClick() > before : numInOuts = ', numInOuts)\r\n\r\n\r\n    const chipInOutsType = title === 'Inputs' ? ItemTypes.CHIP_IN : ItemTypes.CHIP_OUT\r\n\r\n    if (incDec === 'inc') {\r\n\r\n        if (numInOuts === 16) return\r\n\r\n        const chipInOutsName = chipInOutsType + numInOuts++\r\n        console.log('BuildFuncs > handleClick() : chipInOutsName = ', chipInOutsName)\r\n\r\n        newChipInOuts[chipInOutsName] = {\r\n            value: 0,\r\n            connectedTo: null\r\n        }\r\n    }\r\n    else if (incDec === 'dec') {\r\n\r\n        const chipInOutName = chipInOutsType + --numInOuts\r\n        console.log('BuildFuncs > handleClick() : trying to delete chipInOutName = ', chipInOutName)\r\n\r\n        delete newChipInOuts[chipInOutName]\r\n        \r\n        let newGates = { ...gates }\r\n        delete newGates[chipInOutName+'Node']\r\n\r\n        setGates(newGates)\r\n        \r\n        let newWires = { ...wires }\r\n\r\n        for (var wireId in wires) {\r\n            if (wireId.includes(chipInOutName))\r\n                delete newWires[wireId]\r\n        }\r\n        \r\n        setWires(newWires)\r\n    }\r\n\r\n    console.log('BuildFuncs > handleClick() : newChipInOuts = ', newChipInOuts)\r\n\r\n    console.log('BuildFuncs > handleClick() : setChipInOuts = ', setChipInOuts)\r\n\r\n    setChipInOuts(newChipInOuts)\r\n}\r\n\r\n// function getInputValue(chipIns) {\r\n    \r\n//     const \r\n\r\n// }\r\n\r\nfunction validateInputs(val, chipIns, setChipIns, setInputValue) {\r\n    console.log('BuildFuncs > validateInputs() : val = ', val)\r\n\r\n    const isBool = /^[0-1]+$/.test(val)\r\n    console.log('BuildFuncs > validateInputs() : isBool = ', isBool)\r\n\r\n    const isEmpty = val === ''\r\n    console.log('BuildFuncs > validateInputs() : isEmpty = ', isEmpty)\r\n\r\n    if (!isBool && !isEmpty) return\t\r\n\r\n\r\n    let newChipIns = { ...chipIns }\r\n    for (let i = 0; i < val.length; i++) {\r\n        console.log('BuildFuncs > validateInputs() : i = ', i)\r\n\r\n        // newChipIns[ItemTypes.CHIP_IN+(i+1).toString()].value = Number(val[val.length-1-i]) \r\n        newChipIns[ItemTypes.CHIP_IN+i].value = Number(val[val.length-1-i]) \r\n    }\t\r\n\r\n    setInputValue(val)\r\n    setChipIns(newChipIns)\r\n}\r\n\r\nfunction handleClick(evt, setSelectedElement) {\r\n    \r\n    let id = evt.target.id\r\n    console.log('BuildFuncs > handleClickPaper() : id = ', id)\r\n\r\n    let newSelectedElement\r\n    if (id.includes(ItemTypes.BODY) || id.includes(ItemTypes.TEXT)) {\r\n        id = id.replace(ItemTypes.BODY, '').replace(ItemTypes.TEXT, '')     //TODO: check if we can do without the above if\r\n        console.log('BuildFuncs > handleClickPaper() : id = ', id)\r\n\r\n        newSelectedElement = id\r\n    }\r\n    else if (id.includes(ItemTypes.WIRE)) {\r\n        console.log('BuildFuncs > handleClickPaper() : id = ', id)\r\n\r\n        newSelectedElement = id\r\n    }\r\n    else\r\n        newSelectedElement = null\r\n\r\n    setSelectedElement(newSelectedElement)   \r\n}\r\n\r\nfunction handleKeyDown(evt, gates, setGates, wires, setWires, selectedElement, setSelectedElement) { \r\n\r\n    // if (evt.repeat) return\r\n\r\n\r\n    console.log('BuildFuncs > handleKeyDown() : selectedElement = ', selectedElement)\r\n\r\n    // evt.preventDefault()\r\n    // evt.stopPropagation()\r\n\r\n    if (selectedElement === null) return\r\n\r\n    if (evt.keyCode === 48 || evt.keyCode === 49) return\r\n\r\n    const DEL_KEY = 46\r\n    const ESC_KEY = 27\r\n\r\n    // console.log('Target : handleKeyDown() : evt = ', evt)\r\n\r\n    const keyId = evt.keyCode\r\n    // console.log('Target : handleKeyDown() : keyId = ', keyId)\r\n\r\n    // console.log('Target : handleKeyDown() : selectedElement = ', selectedElement)\r\n\r\n    if (keyId === DEL_KEY) {\r\n\r\n        console.log('Build : handleKeyDown() : wires = ', wires)\r\n\r\n        let newWires = { ...wires }\r\n\r\n        if (selectedElement.includes('_'))\r\n            delete newWires[selectedElement]\r\n        else {\r\n            let newGates = { ...gates }\r\n            delete newGates[selectedElement]\r\n            console.log('BuildFuncs > handleKeyDown() : newGates = ', newGates)\r\n       \r\n            setGates(newGates)\r\n\r\n            const wireIds = Object.keys(wires)  \r\n            wireIds.forEach(wireId => {\r\n                if (wireId.includes(selectedElement))\r\n                    delete newWires[wireId]\r\n            })\r\n        } \r\n\r\n        console.log('BuildFuncs > handleKeyDown() : newWires = ', newWires)\r\n\r\n\r\n        setSelectedElement(null)\r\n\r\n        setWires(newWires)\r\n    }\r\n    else if (keyId === ESC_KEY)\r\n        setSelectedElement(null)\r\n}\r\n\r\n\r\nexport { handleDragOver, addRemoveChipTerminal, validateInputs, handleKeyDown, handleClick }","import React, { useState, useMemo } from 'react'\r\nimport ComponentsDrawer from './ComponentsDrawer'\r\n\r\nimport { theme } from '../../theme' \r\n\r\nimport Paper from '@material-ui/core/Paper'\r\n\r\nimport './Build.css'\r\n\r\n\r\n\r\nimport DnDApp from './DnD/DnDApp'\r\n\r\nimport Grid from '@material-ui/core/Grid'\r\n\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport UpArrow from '@material-ui/icons/KeyboardArrowUp'\r\nimport DownArrow from '@material-ui/icons/KeyboardArrowDown'\r\nimport Save from '@material-ui/icons/Save'\r\nimport PlayArrow from '@material-ui/icons/PlayArrow'\r\n\r\nimport Input from '@material-ui/core/Input'\r\n\r\nimport { useContext } from 'react'\r\nimport { ChipInsContext, ChipOutsContext, GatesContext, WiresContext, SelectedElementContext } from './BuildContext'\r\n\r\n\r\nimport { handleDragOver, addRemoveChipTerminal, validateInputs, handleClick, handleKeyDown } from './BuildFuncs'\r\n\r\nimport ItemTypes from './ItemTypes'\r\n\r\nexport default () => {\r\n\r\n\tconst [shift, setShift] = useState(0)\r\n\t// const [dragAreaVisible, setDragAreaVisible] = useState(false)\r\n\r\n\t// const context = useContext(AppDataContext)\r\n\t// const { gates, setGates, wires, setWires, chipIns, setChipIns, chipOuts, setChipOuts, selectedElement, setSelectedElement } = context\r\n\t\r\n\tconst [chipIns, setChipIns] = useContext(ChipInsContext)\r\n\tconst [chipOuts, setChipOuts] = useContext(ChipOutsContext)\r\n\tconst [gates, setGates] = useContext(GatesContext)\r\n\tconst [wires, setWires] = useContext(WiresContext)\r\n\t// const [selectedElement, setSelectedElement] = useContext(SelectedElementContext)\r\n\tconst [selectedElement, setSelectedElement] = useState(null)\r\n\r\n\r\n\tconst percent = 0.6\r\n\r\n\tconst styles = {\r\n\t\theader: {\r\n\t\t\tbackgroundColor: theme.palette.primary.main,\r\n\t\t\t// minHeight: '90vh',\r\n\t\t\tdisplay: 'flex',\r\n\t\t\tflexDirection: 'column',\r\n\t\t\talignItems: 'center',\r\n\t\t\tjustifyContent: 'top',\r\n\t\t\tcolor: theme.palette.primary.contrastText,\r\n\t\t\tmarginLeft: shift,\r\n\t\t\tpaddingTop: 30,\r\n\t\t},\r\n\t\theaderTitle: {\r\n\t\t\tfontSize: 'calc(14px + 2vmin)',\r\n\t\t\ttextShadow: '-1px 0 black, 0 1px black, 1px 0 black, 0 -1px black',\r\n\t\t\tposition: 'relative',\r\n\t\t\ttop: '-35px',\r\n\t\t},\r\n\t\theaderSubtitle: {\r\n\t\t\tfontSize: 'calc(6px + 2vmin)',\r\n\t\t\tposition: 'relative',\r\n\t\t\ttop: '-55px',\r\n\t\t},\r\n\t\tpaper: {\r\n\t\t\t// top: -30, \r\n\t\t\twidth: 1600*percent, \r\n\t\t\theight: 900*percent, \r\n\t\t\tposition: 'relative', \r\n\t\t\t// zIndex: 9999, \r\n\t\t\tdisplay: 'flex', \r\n\t\t\talignItems: 'center', \r\n\t\t\tjustifyContent: 'center',\r\n\t\t\ttextAlign: 'center',\r\n\t\t\tmarginTop: 5,\r\n\t\t\tmarginBottom: 5,\r\n\t\t},\r\n\t}\t\r\n\t\r\n\tconst Row = ({ columns }) => (\r\n\t\t<Grid container spacing={0} justify='space-around' alignItems='center'\r\n\t\tonClick={evt=>handleClick(evt, setSelectedElement)}\r\n\t\t\t\t\tonKeyDown={evt=>handleKeyDown(evt, gates, setGates, wires, setWires, selectedElement, setSelectedElement)} \r\n\t\t\t\t    // tabIndex=\"0\"\r\n\t\t>\r\n\t\t\t<Grid item className='viewGridMed' md={3} children={columns[0]} style={{ pointerEvents: columns[0].props.type === 'Inputs' ? 'none' : 'all' }} />\r\n\t\t\t<Grid item className='viewGridMed' md={6} children={columns[1]} />\r\n\t\t\t<Grid item className='viewGridMed' md={3} children={columns[2]} style={{ pointerEvents: columns[2].props.type === 'Outputs' ? 'none' : 'all' }} />\r\n\t\t</Grid>\r\n\t)\r\n\r\n\r\n\t\r\n\r\n\tconst TerminalHeadings = ({ title, chipInOuts, setChipInOuts }) => (\r\n\t\t<Grid container justify='center' alignItems='center' spacing={2}>\r\n\t\t\t<Grid item>\r\n\t\t\t\t<Grid container direction='column' justify='center'>\r\n\t\t\t\t\t<Grid item>\r\n\t\t\t\t\t\t<IconButton \r\n\t\t\t\t\t\t\tchildren={<UpArrow fontSize='small' />} \r\n\t\t\t\t\t\t\tsize='small' \r\n\t\t\t\t\t\t\tonClick={()=>addRemoveChipTerminal(title, chipInOuts, setChipInOuts, 'inc', gates, setGates, wires, setWires)} \r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t<Grid item>\r\n\t\t\t\t\t\t{Object.keys(chipInOuts).length}\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t<Grid item>\r\n\t\t\t\t\t\t<IconButton \r\n\t\t\t\t\t\t\tchildren={<DownArrow fontSize='small' />} \r\n\t\t\t\t\t\t\tsize='small' \r\n\t\t\t\t\t\t\tonClick={()=>addRemoveChipTerminal(title, chipInOuts, setChipInOuts, 'dec', gates, setGates, wires, setWires)} \r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t</Grid>\r\n\t\t\t</Grid>\r\n\t\t\t<Grid item>{title}</Grid>\r\n\t\t</Grid>\r\n\t) \r\n\r\n\tconst Inputs = ({ name }) => {\r\n\r\n\t\tfunction handleMouseUpIn(inputName) {\r\n\r\n\t\t\tconst floatingWireName = localStorage.getItem('floatingWireName')\r\n\t\t\tconsole.log('Build > Inputs > handleMouseUpIn() : floatingWireName = ', floatingWireName)\r\n\r\n\t\t\tlet newChipIns = { ...chipIns }\r\n\t\t\tconsole.log('Build > Inputs > handleMouseUpIn() : newChipIns = ', newChipIns)\r\n\t\t\tconsole.log('Build > Inputs > handleMouseUpIn() : inputName = ', inputName)\r\n\t\t\tconsole.log('Build > Inputs > handleMouseUpIn() : newChipIns[inputName] = ', newChipIns[inputName])\r\n\r\n\t\t\tnewChipIns[inputName].connectedTo = floatingWireName.replace('floatingWire_', '')\r\n\r\n\t\t\tsetChipIns(newChipIns)\r\n\t\t}\r\n\r\n\t\tconst [strokeColor, setStrokeColor] = useState('black')\r\n\r\n\t\tconsole.log('Build > Inputs : name = ', name)\r\n\r\n\t\treturn (\r\n\t\t\t<svg width='100' height='12' viewBox='0 0 100 10'>\r\n\t\t\t\t<text                \r\n\t\t\t\t\t// id={id+'Text'}\r\n\t\t\t\t\t// strokeWidth='1'\r\n\t\t\t\t\tx={name.length === 3 ? '12' : '6'} y='80%' \r\n\t\t\t\t\tfontSize='11' \r\n\t\t\t\t\t// fontWeight='100'\r\n\t\t\t\t\tfill='grey'  \r\n\t\t\t\t>\r\n\t\t\t\t\t{name}\r\n\t\t\t\t</text>\r\n\t\t\t\t<text                \r\n\t\t\t\t\t// id={id+'Text'}\r\n\t\t\t\t\t// strokeWidth='1'\r\n\t\t\t\t\tx='40' y='80%' \r\n\t\t\t\t\tfontSize='12' \r\n\t\t\t\t\t// fontWeight='100'\r\n\t\t\t\t\tfill='white'  \r\n\t\t\t\t>\r\n\t\t\t\t\t{chipIns[name].value}\r\n\t\t\t\t</text>\r\n\t\t\t\t<line \r\n\t\t\t\t\tid={name} \r\n\t\t\t\t\tx1='60' y1='5' x2='100' y2='5' \r\n\t\t\t\t\tstroke={strokeColor}\r\n\t\t\t\t\tstrokeWidth='5'\r\n\t\t\t\t\tpointerEvents='all'\r\n\t\t\t\t\tonMouseOver={()=>setStrokeColor(theme.palette.primary.light)}\r\n\t\t\t\t\tonMouseOut={()=>setStrokeColor('black')}\r\n\t\t\t\t\tonMouseUp={()=>handleMouseUpIn(name)}\r\n\t\t\t\t/>  \r\n\t\t\t</svg>\r\n\t\t)\r\n\t}\r\n\r\n\tconst Outputs = ({ name }) => {\r\n\t\tconst [strokeColor, setStrokeColor] = useState('black')\r\n\r\n\t\treturn (\r\n\t\t\t<svg width='100' height='12' viewBox='0 0 100 10'>\r\n\t\t\t\t<line \r\n\t\t\t\t\tid={name} \r\n\t\t\t\t\tx1='0' y1='5' x2='40' y2='5' \r\n\t\t\t\t\tstroke={strokeColor}\r\n\t\t\t\t\tstrokeWidth='5'\r\n\t\t\t\t\tpointerEvents='all'\r\n\t\t\t\t\tonMouseOver={()=>setStrokeColor(theme.palette.primary.light)}\r\n\t\t\t\t\tonMouseOut={()=>setStrokeColor('black')}\r\n\t\t\t\t\t\t\t\t\t/>  \r\n\t\t\t\t<text                \r\n\t\t\t\t\t// id={id+'Text'}\r\n\t\t\t\t\t// strokeWidth='1'\r\n\t\t\t\t\tx={name.length === 4 ? '57' : '52'} y='80%' \r\n\t\t\t\t\tfontSize='11' \r\n\t\t\t\t\t// fontWeight='100'\r\n\t\t\t\t\tfill='grey'  \r\n\t\t\t\t>\r\n\t\t\t\t\t{name}\r\n\t\t\t\t</text>\r\n\t\t\t\t<text                \r\n\t\t\t\t\t// id={id+'Text'}\r\n\t\t\t\t\t// strokeWidth='1'\r\n\t\t\t\t\tx='92' y='80%' \r\n\t\t\t\t\tfontSize='12' \r\n\t\t\t\t\t// fontWeight='100'\r\n\t\t\t\t\tfill='white'  \r\n\t\t\t\t>\r\n\t\t\t\t\t{chipOuts[name].value}\r\n\t\t\t\t</text>\r\n\t\t\t</svg>\r\n\t\t)\r\n\t}\r\n\r\n\tconst Terminals = ({ chipInOuts }) => (\r\n\t\t<Grid container direction='column' justify='center' alignItems='center' className='viewGridMed'>\r\n\t\t\t{Object.keys(chipInOuts).map(child => \r\n\t\t\t\t<Grid item \r\n\t\t\t\t\tclassName='viewGridSmall' \r\n\t\t\t\t\tkey={child} \r\n\t\t\t\t\tchildren={ \r\n\t\t\t\t\t\tObject.keys(chipInOuts)[0].includes(ItemTypes.CHIP_IN) \r\n\t\t\t\t\t\t\t? <Inputs name={child} /> \r\n\t\t\t\t\t\t\t: <Outputs name={child} /> \r\n\t\t\t\t\t} \r\n\t\t\t\t/>)}\r\n\t\t</Grid>\r\n\t)\r\n\r\n\tconst [inputValue, setInputValue] = useState('')\r\n\r\n\t\r\n\tconst TerminalValues = ({ title }) => {\r\n\r\n\t\tif (title === 'Inputs') {\r\n\t\t\tconst inputsVals = Object.values(chipIns)\r\n\t\t\tconst numInputs = inputsVals.length\r\n\r\n\t\t\treturn <Input autoFocus inputProps={{ style: {textAlign: 'center', color: inputValue.length < numInputs ? 'grey' : 'white' }, maxLength: numInputs }} value={inputValue} onChange={evt=>validateInputs(evt.target.value, chipIns, setChipIns, setInputValue)}></Input> \r\n\t\t}\r\n\t\telse if (title === 'Outputs') {\r\n\r\n\t\t\tlet val = ''\r\n\t\t\tconst outputsVals = Object.values(chipOuts)\r\n\t\t\tconst numOutputs = outputsVals.length\r\n\r\n\t\t\tfor (let i = 0; i < numOutputs; i++) \r\n\t\t\t\tval = val.concat(outputsVals[numOutputs-1-i].value)\r\n\r\n\t\t\tconsole.log('Build > TerminalValues : val = ', val)\r\n\r\n\t\t\treturn <Input readOnly inputProps={{ style: {textAlign: 'center'} }} value={val}></Input>\r\n\t\t}\r\n\t}\r\n\r\n\tconst SaveButton = () => (\r\n\t\t<IconButton children={<Save fontSize='large' />} onClick={()=>console.log('trying to save...')} />\r\n\t)\r\n\r\n\tconst PlayButton = () => (\r\n\t\t<IconButton children={<PlayArrow fontSize='large' />} onClick={()=>console.log('trying to run...')} />\r\n\t)\r\n\r\n\r\n\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n    // useEffect(()=>updateWires(wires, setWires), [gates, inputs])\r\n\r\n\t// // eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t// useEffect(() => addChipTerminalNode(chipIns, chipOuts, gates, setGates), [chipIns, chipOuts])\r\n\t\r\n\r\n\t// console.log('Build : context = ', context)\r\n\tconsole.log('Build : chipIns = ', chipIns)\r\n\tconsole.log('Build : gates = ', gates)\r\n\tconsole.log('Build : wires = ', wires)    \r\n\tconsole.log('Build : selectedElement = ', selectedElement)\r\n\r\n\r\nreturn useMemo(()=>{\r\n\treturn (\r\n\t\t// <BuildContextProvider>\r\n\t\t\t<div \r\n\t\t\t\tstyle={styles.header} \r\n\t\t\t\tonDragOver={handleDragOver} \r\n\t\t\t\t// onClick={evt=>handleClick(evt, setSelectedElement)}\r\n\t\t\t>\r\n\t\t\t\t<ComponentsDrawer setShift={setShift} />\r\n\t\t\t\t<Paper \r\n\t\t\t\t\tid='paper' \r\n\t\t\t\t\tstyle={styles.paper} \r\n\t\t\t\t\t\r\n\r\n\t\t\t\t>\r\n\t\t\t\t\t<Grid container direction='column' justify='space-between' spacing={0} className='viewGridLarge' style={{ height: \"100%\", paddingBottom: 20, paddingTop: 7 }}>\r\n\t\t\t\t\t\t<Row \r\n\t\t\t\t\t\t\tcolumns={[\r\n\t\t\t\t\t\t\t\t<TerminalHeadings title='Inputs' chipInOuts={chipIns} setChipInOuts={setChipIns} />,\r\n\t\t\t\t\t\t\t\t<SaveButton />, \r\n\t\t\t\t\t\t\t\t<TerminalHeadings title='Outputs' chipInOuts={chipOuts} setChipInOuts={setChipOuts} />\r\n\t\t\t\t\t\t\t]}\r\n\t\t\t\t\t// \t\tonClick={evt=>handleClick(evt, setSelectedElement)}\r\n\t\t\t\t\t// onKeyDown={evt=>handleKeyDown(evt, gates, setGates, wires, setWires, selectedElement, setSelectedElement)} \r\n\t\t\t\t    // tabIndex=\"0\" \r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Row \r\n\t\t\t\t\t\t\tcolumns={[\r\n\t\t\t\t\t\t\t\t<Terminals type='Inputs' chipInOuts={chipIns} />,\r\n\t\t\t\t\t\t\t\t<DnDApp selectedElement={selectedElement} />, \r\n\t\t\t\t\t\t\t\t<Terminals type='Outputs' chipInOuts={chipOuts} />\r\n\t\t\t\t\t\t\t]} \r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Row columns={[<TerminalValues title='Inputs' />, <PlayButton />, <TerminalValues title='Outputs' />]} />\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t</Paper>\r\n\t\t\t</div>\r\n\t\t// </BuildContextProvider>\r\n\t)\r\n}, [gates, wires, chipIns, chipOuts, selectedElement])\r\n}","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nimport MuiThemeProvider from '@material-ui/core/styles/MuiThemeProvider';\r\nimport { theme } from './theme' \r\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\r\n\r\n// import App from './Routes/Build/DnD/App'\r\n\r\nReactDOM.render(\r\n    <MuiThemeProvider theme={theme}>\r\n        <CssBaseline />\r\n        <App />\r\n    </MuiThemeProvider>, \r\n    document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n","import React, { useState } from 'react'\r\nimport { BrowserRouter as Router, Route, Switch, Link } from 'react-router-dom'\r\n\r\nimport LandingPage from './Routes/LandingPage'\r\nimport LoginForm from './Routes/Auth/LoginForm'\r\nimport LogoutForm from './Routes/Auth/LogoutForm'\r\nimport RegisterForm from './Routes/Auth/RegisterForm'\r\nimport RegisterConf from './Routes/Auth/RegisterConf'\r\nimport ResetForm from './Routes/Auth/ResetForm'\r\nimport ResetConf from './Routes/Auth/ResetConf'\r\nimport PrivateRoute from './Routes/PrivateRoute'\r\nimport Home from './Routes/Home'\r\nimport Build from './Routes/Build/Build'\r\n\r\n\r\n\r\nimport AppBar from '@material-ui/core/AppBar'\r\nimport Toolbar from '@material-ui/core/Toolbar'\r\nimport Tabs from '@material-ui/core/Tabs'\r\nimport Tab from '@material-ui/core/Tab'\r\nimport Grid from '@material-ui/core/Grid'\r\n\r\nimport HotTubIcon from '@material-ui/icons/HotTub'\r\nimport FingerprintIcon from '@material-ui/icons/Fingerprint'\r\nimport HelpIcon from '@material-ui/icons/Help'\r\nimport AddIcon from '@material-ui/icons/AddCircle'\r\nimport CloseIcon from '@material-ui/icons/Close'\r\nimport HomeIcon from '@material-ui/icons/Home'\r\n\r\n\r\nimport Typography from '@material-ui/core/Typography'\r\nimport { theme } from './theme'\r\n\r\nimport { BuildContextProvider } from './Routes/Build/BuildContext'\r\n\r\n\r\nexport default () => {\r\n\r\n\tconst [isAuthenticated, setIsAuthenticated] = useState(localStorage.getItem('authenticated'))\r\n\r\n\tconst AppBarSmart = () => {\r\n\r\n\t\tconst [tabValue, setTabValue] = useState(window.location.pathname)\r\n\r\n\t\tconst tabGroup1 = isAuthenticated ? ['/home', '/build'] : ['/about']\r\n\t\tconst tabGroup2 = isAuthenticated ? ['/about', '/logout'] : ['/login', '/register']\r\n\r\n\t\tconst AuthTabs1 = () => (\r\n\t\t\t<Tabs value={window.location.pathname === tabValue && tabGroup1.includes(window.location.pathname) ? tabValue : false} onChange={(event, value) => setTabValue(value)}>\r\n\t\t\t\t<Tab icon={<HomeIcon />} value='/home' label=\"Home\" component={Link} to=\"/home\" />\r\n\t\t\t\t<Tab icon={<AddIcon />} value='/build' label=\"Build\" component={Link} to=\"/build\" />\r\n\t\t\t</Tabs>\r\n\t\t)\r\n\r\n\t\tconst AuthTabs2 = () => (\r\n\t\t\t<Tabs value={window.location.pathname === tabValue && tabGroup2.includes(window.location.pathname) ? tabValue : false} onChange={(event, value) => setTabValue(value)}>\r\n\t\t\t\t<Tab icon={<HelpIcon />} value='/about' label=\"About Me\" component={Link} to=\"/about\" />\r\n\t\t\t\t<Tab icon={<CloseIcon />} value='/logout' label=\"Log Out\" component={Link} to=\"/logout\" />\r\n\t\t\t</Tabs>\r\n\t\t)\r\n\t\t\r\n\t\tconst NoAuthTabs1 = () => (\r\n\t\t\t<Tabs value={window.location.pathname === tabValue && tabGroup1.includes(window.location.pathname) ? tabValue : false} onChange={(event, value) => setTabValue(value)}>\r\n\t\t\t\t<Tab icon={<HelpIcon />} value='/about' label=\"About Me\" component={Link} to=\"/about\" />\r\n\t\t\t</Tabs>\r\n\t\t)\r\n\r\n\t\tconst NoAuthTabs2 = () => (\r\n\t\t\t<Tabs value={window.location.pathname === tabValue && tabGroup2.includes(window.location.pathname) ? tabValue : false} onChange={(event, value) => setTabValue(value)}>\r\n\t\t\t\t<Tab icon={<FingerprintIcon />} value='/login' label=\"Log In\" component={Link} to=\"/login\" />\r\n\t\t\t\t<Tab icon={<HotTubIcon />} value='/register' label=\"Register\" component={Link} to=\"/register\" />\r\n\t\t\t</Tabs>\r\n\t\t)\r\n\r\n\r\n\t\treturn (\r\n\t\t\t<AppBar>\r\n\t\t\t\t<Toolbar>\r\n\t\t\t\t\t<Grid container justify='flex-start'>\r\n\t\t\t\t\t\t{!isAuthenticated ? <NoAuthTabs1 /> : <AuthTabs1 />}\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t<Grid container justify='flex-end'>\r\n\t\t\t\t\t\t{!isAuthenticated ? <NoAuthTabs2 /> : <AuthTabs2 />}\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t</Toolbar>\r\n\t\t\t</AppBar>\r\n\t\t)\r\n\t}\r\n\r\n\treturn (    \r\n\t\t// <Router style={styles.div}>\r\n\t\t<Router>\r\n\t\t\t<AppBarSmart />\r\n\t\t\t<Switch>\r\n\t\t\t\t<Route exact path='/' component={!isAuthenticated ? LandingPage : Home} />\r\n\t\t\t\t<Route exact path='/login' render={(props) => <LoginForm {...props} setIsAuthenticated={setIsAuthenticated} />} />\r\n\t\t\t\t<Route path=\"/register\" component={RegisterForm} />\r\n\t\t\t\t<Route path='/registerConfirmed' component={RegisterConf} />\r\n\t\t\t\t<Route path='/reset' component={ResetForm} />\r\n\t\t\t\t<Route path='/resetConfirmed' component={ResetConf} />\r\n\t\t\t\t{/* <Route path='/about' render={(props) => <Redirect {...props} to='https://cv.jsalaz1989.now.sh/' />} /> */}\r\n\t\t\t\t<Route path='/about' component={() => {window.location.href = 'https://cv.jsalaz1989.now.sh/'; return null;}}/>\r\n\t\t\t\t<PrivateRoute path='/home' component={Home} isAuthenticated={isAuthenticated} />\r\n\t\t\t\t{/* <PrivateRoute path='/build' component={Build} isAuthenticated={isAuthenticated}/> */}\r\n\t\t\t\t<Route exact path='/build' render={(props) => <BuildContextProvider {...props}><Build {...props} /></BuildContextProvider>} />\r\n\t\t\t\t<PrivateRoute path='/logout' component={LogoutForm} isAuthenticated={isAuthenticated}/>\r\n\t\t\t</Switch>\r\n\t\t\t<Typography color='textSecondary' align='center' className='foot' style={{ backgroundColor: theme.palette.primary.main }}>j++ &copy; 2019</Typography>\r\n        </Router>\r\n    )\r\n}"],"sourceRoot":""}